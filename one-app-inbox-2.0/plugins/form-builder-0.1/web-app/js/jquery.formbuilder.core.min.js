function submitForm(){$('input[type="submit"][name="_action_Update"]').unbind("click").bind("click",submitFormUsingButton).trigger("click")}function submitFormUsingButton(){return setSequeceOfAllFields()}function vldtPPC(){var e="";var t=null;$(".ctrlHolder:not(.deletedCtrlHolder)").each(function(){var n=$(this);if(document.getElementById("fields["+n.attr("rel")+"].type").value=="Paypal"){var r=$.parseJSON(unescape(document.getElementById("fields["+n.attr("rel")+"].settings").value));if(r.emid==null||r.emid==""){e="Oops! PayPal id is mandatory in this control."}t=n}});if(e!=""){t.qtip({content:e+'[ <span onclick="hideButtonToolTip();" style="cursor:pointer;">OK</span> ]',position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});return false}return true}function hideButtonToolTip(){var e=null;$(".ctrlHolder:not(.deletedCtrlHolder)").each(function(){var t=$(this);if(document.getElementById("fields["+t.attr("rel")+"].type").value=="Paypal"){e=t}});if(e!=null){e.qtip("destroy");e.removeAttr("title")}}function hideToolTip(){$('input[type="submit"][name="_action_Update"]').qtip("destroy");$('input[type="submit"][name="_action_Update"]').removeAttr("title")}function updateStatusForDeletedFields(){var e=$(".deletedCtrlHolder");e.each(function(){var e=$(this).attr("rel");document.getElementById("fields["+e+"].status").value="D"})}function setSequeceOfAllFields(){if(!vldtPPC()){return false}updateStatusForDeletedFields();var e=0;$(".ctrlHolder").each(function(){var t=$(this);if(t.attr("class").indexOf("deletedCtrlHolder")==-1){var n=t.attr("rel");document.getElementById("fields["+n+"].sequence").value=e++}});loadScreenBlock()}function showToolTip(e,t){var n=$('.ctrlHolder[rel="'+t+'"]');$("#deleteButton"+t).mouseover(function(){n.qtip({content:e,position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"mouseout",target:$(this)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}})})}function checkScroll(){var e=$(window).scrollTop();$(".floatingPanel").attr("id","floatingPanel");var t=$("#floatingPanel").height();var n=$(window).height();if($(window).scrollTop()==0){$("#floatingPanel").css("position","relative");$("#floatingPanel").css("top",$(".floatingPanelIdentifier").position);$("#floatingPanel").css("bottom","")}else if($(window).height()>$("#floatingPanel").height()+60){$("#floatingPanel").css("position","fixed");$("#floatingPanel").css("top","40");$("#floatingPanel").css("bottom","")}else{if($(window).scrollTop()+$(window).height()>=$(".floatingPanelIdentifier").position({scroll:false}).top+$("#floatingPanel").height()){$("#floatingPanel").css("position","fixed");$("#floatingPanel").css("bottom","0");$("#floatingPanel").css("top","")}else{$("#floatingPanel").css("position","relative");$("#floatingPanel").css("top",$(".floatingPanelIdentifier").position);$("#floatingPanel").css("bottom","")}}}function setWidthSetter(){try{var e=$(".widthSetterSlider");if($(".ctrlHolder").size()==1){var t=$("a",e).css("left").replace("%","")*1;$(".customLengthLabel").css("width",t-1+"%");$(".customLengthField").css("width",100-(t+1)-2+"%")}$("a",e).height($("a",e).parent().parent().parent().height())}catch(n){}}var index1=0,firstDiv,secondDiv,thirdDiv,imageSourceDir="/form-builder/plugins/form-builder-0.1";var inputTypeFields=["SingleLineDate","SingleLineText","SingleLineNumber","MultiLineText","dropdown","GroupButton","CheckBox","ScaleRating","LookUp","Likert"];var FormBuilder={options:{fields:"PlainText,SingleLineDate,SingleLineText,SingleLineNumber,MultiLineText,dropdown,GroupButton,CheckBox,PlainTextHref,ScaleRating,ImageUpload,LinkVideo,FormulaField,FileUpload,LookUp,SubForm,PageBreak,LikeDislikeButton,Paypal,Likert",tabSelected:0,readOnly:false,tabDisabled:[],formCounter:1,language:"en",settings:{en:{name:"Untitled Form",description:"Please fill out this form. Thank you!",classes:["leftAlign"],heading:"h2",styles:{fontFamily:"Lucida Sans Unicode",fontSize:"13",fontStyles:[1,0,0]}},zh_CN:{name:"??",classes:["rightAlign"],heading:"h2",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},styles:{form:{color:"default",backgroundColor:"default"},heading:{color:"default",backgroundColor:"default"},description:{color:"default",backgroundColor:"default"}}},_id:"#container",_languages:["en"],_builderPanel:"#builderPanel",_builderForm:"#builderForm",_emptyBuilderPanel:"#emptyBuilderPanel",_paletteTabs:"#paletteTabs",_standardFieldsPanel:"#standardFields",_fancyFieldsPanel:"#fancyFields",_advanceFieldsPanel:"#advanceFields",_fieldSettingsPanel:"#fieldSettings",_fieldSettingsLanguageSection:"#fieldSettings fieldset.language:first",_fieldSettingsGeneralSection:"#fieldSettings div.general:first",_formSettingsLanguageSection:"#formSettings fieldset.language:first",_formSettingsGeneralSection:"#formSettings div.general:first",_languagesSupportIdGeneration:["en"],_dragBoxCss:{opacity:.6,zIndex:8888,border:"5px solid #cccccc"},_formControls:"#builderPanel fieldset",_draggableClass:"draggable",_dropPlaceHolderClass:"dropPlaceHolder"},_create:function(){this._log("FormBuilder._create called. this.options.widgets = "+this.options.widgets);this._initBrowserDefaultSettings();this._initBuilderPalette();this._initBuilderPanel()},_initBrowserDefaultSettings:function(){var e=$("html");var t=this.options;t._fontFamily=e.css("fontFamily");t._fontSize=e.css("fontSize");t._color=e.css("color");t._backgroundColor=e.css("backgroundColor");var n=t._fontSize.lastIndexOf("px");if(n>-1){t._fontSize=t._fontSize.substring(0,n)}},_initBuilderPalette:function(){$(window).scroll(checkScroll);$(this.options._paletteTabs).tabs({selected:this.options.tabSelected,disabled:this.options.tabDisabled,select:this._isFieldSettingsTabCanOpen});var e=this.options.fields;e=e.split(",");var t=e.length;var n;var r;var i;for(i=0;i<t;i++){if($.trim(e[i])!="SubForm"||$("#formCat").val()=="N"){n=$["fb"]["fb"+$.trim(e[i])].prototype.options;r=$('<a id="'+n._type+'" href="#" class="fbWidget">'+n.name+"</a>");r.button()["fb"+n._type]().appendTo(n.belongsTo);this._initDraggable(r,n._type)}}},_initDraggable:function(e,t){e.draggable({cursor:"move",distance:10,helper:function(e,n){var r=$(this).data("fb"+t)._createFbWidget(e);if(r==null){r=$('<div class="notAllowed" style="display:none;"></div>')}r.css($.fb.formbuilder.prototype.options._dragBoxCss).css({width:$(".formHeading").css("width")}).addClass($.fb.formbuilder.prototype.options._draggableClass);$.fb.formbuilder.prototype._log("helper.html() = "+r.html());return r},drag:function(e,t){$.fb.formbuilder.prototype._log("ui.helper: w x h = "+t.helper.css("width")+" x "+t.helper.css("height"));var n=$.fb.formbuilder.prototype._getPreviousCtrlHolder(t);var r=$.fb.formbuilder.prototype.options;if(n&&n.attr("rel")!=t.helper.attr("rel")){t.helper.attr("rel",n.attr("rel"));$("."+r._dropPlaceHolderClass).remove();$("<div></div>").addClass(r._dropPlaceHolderClass).css("height",t.helper.attr("class").indexOf("notAllowed")>-1?"0px":"30px").insertAfter(n)}else{var i=$("."+$.fb.fbWidget.prototype.options._styleClass+":visible:not(."+r._draggableClass+"):first");if(i.length&&t.offset.top<i.offset().top){$("."+r._dropPlaceHolderClass).remove()}}},stop:function(e,t){$("."+$.fb.formbuilder.prototype.options._dropPlaceHolderClass).remove()}})},_isFieldSettingsTabCanOpen:function(e,t){if(t.index==1){var n=$.fb.formbuilder.prototype.options;var r=true;if($(n._emptyBuilderPanel).is(":visible")){$(n._standardFieldsPanel).qtip({content:"No field was created. Please select a field.",position:{my:"bottom left",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{target:$(n._standardFieldsPanel+", "+n._fancyFieldsPanel+", "+n._advanceFieldsPanel)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});r=false}else if($(n._builderForm+" ."+$.fb.fbWidget.prototype.options._selectedClass).length===0){$("."+$.fb.fbWidget.prototype.options._styleClass+":first").qtip({content:"Please select field below to see it's Field Settings.",position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});r=false}if(!r){$(this).tabs("select",0)}return r}},_initBuilderPanel:function(){this._initFormSettings();if(!this.options.readOnly){this._initSortableWidgets();this._initDroppable()}else{$("input:not(div.buttons input, #id)").attr("disabled",true);$("select:not(#language)").attr("disabled",true);$("textarea").attr("disabled",true)}this._initWidgetsEventBinder()},_initDroppable:function(){var e=this.options;var t=$(e._formControls);t.droppable({drop:function(n,r){$.fb.formbuilder.prototype._log("drop executing. ui.helper.attr(rel) = "+r.helper.attr("rel")+", ui.offset.top = "+r.offset.top);$.fb.formbuilder.prototype._log("ui.draggable.attr(id) = "+r.draggable.attr("id"));if(r.helper.attr("class").indexOf("notAllowed")>-1){r.helper.remove();return}if(r.helper.attr("class").lastIndexOf(e._draggableClass)>-1){$("."+e._dropPlaceHolderClass).remove();var i=r.draggable.data("fb"+r.draggable.attr("id"));var s=$.fb.formbuilder.prototype._getPreviousCtrlHolder(r);var o=i._createFbWidget(n);var u;if(s){i._log("$prevCtrlHolder.text() = "+s.text());o.insertAfter(s);u=s.next().nextAll(":visible")}else{$(e._emptyBuilderPanel+":visible").hide();u=$("."+$.fb.fbWidget.prototype.options._styleClass+":visible:not(."+e._draggableClass+")",t);t.prepend(o).sortable("refresh")}o.toggle("slide",{direction:"up"},"slow");if(u.length){i._log("$elements.first().text() = "+u.first().text());$.fb.formbuilder.prototype._getSequence(o).val($.fb.formbuilder.prototype._getSequence(u.first()).val()).change();u.each(function(e){$.fb.formbuilder.prototype._increaseSequence($(this))})}setWidthSetter()}}})},_getPreviousCtrlHolder:function(e){var t=$("."+$.fb.fbWidget.prototype.options._styleClass+":visible:not(."+$.fb.formbuilder.prototype.options._draggableClass+")");var n,r;t.each(function(t){n=$(this);$.fb.formbuilder.prototype._log(t+") top = "+n.offset().top);if(e.offset.top>n.offset().top){r=n}else{return false}});return r},_initFormSettings:function(){var e=$.fb.fbWidget.prototype;var t=this.options;var n=$(t._builderPanel);var r=$(t._builderForm);var i=$(t._formSettingsLanguageSection);var s=$(t._formSettingsGeneralSection);var o=$.inArray(t.language,t._languages)>-1?t.language:"en";var u=$("#language",i).val(o).change(this._languageChange);var a;var f=this;var l=$(".formHeading",n);var c=$("#settings",r);if(c.val()==""){a=t.settings[u.val()];var h=$("#formDescription",r);h.text(a.description);l.addClass(a.classes[0]).append("<"+a.heading+' class="heading">'+a.name+"</"+a.heading+">").append(h);$("#name",r).val(e._propertyName(t.settings["en"].name));f._updateSettings(f)}else{t.settings=$.parseJSON(unescape(c.val()));a=t.settings[u.val()]}e._log("settings.name = "+a.name);var p=e._label({label:"Name",name:"form.name"}).append('<input type="text" id="form.name" value="'+a.name+'" />');$("input",p).keyup(function(n){var i=$(this).val();e._log("options.disabledNameChange = "+t.disabledNameChange);if(!t.disabledNameChange&&$.inArray(u.val(),t._languagesSupportIdGeneration)>-1){var s=e._propertyName(i);$("#name",r).val(s).change()}e._log("$(this).val() = "+i);a.name=i;$(a.heading,l).text(i);f._updateSettings(f)});var d=e._label({label:"Description",name:"form.description"}).append('<textArea id="form.description" style="resize: vertical" />');$("textArea",d).keyup(function(e){var t=$(this).val();t=removeScriptTag(t);while(t.indexOf("\n")>-1){t=t.replace("\n","<br/>")}$("#formDescription",l).html(t);a.description=t;f._updateSettings(f)});var v=""+(a.description!=undefined?a.description:"");while(v.indexOf("<br/>")>-1||v.indexOf("<br>")>-1){v=v.replace("<br>","\n");v=v.replace("<br/>","\n")}$("textArea",d).val(v);var m='<select id="form.masterForms" multiple="multiple">';for(var g=0;g<masterFormData.length;g++){m+='<option value="'+masterFormData[g].id+'" selected=selected>'+masterFormData[g].label+"</option>"}m+="</select>";var y=e._label({label:"Master Forms",name:"form.masterForms"}).append(m);$("select",y).change(function(){a.masterForms=$(this).val();f._updateSettings(f)});$("select",y).parent().hide();var b={"Theme-1":"theme1","Theme-2":"theme2","Theme-3":"theme3","Theme-4":"theme4"};var w='<select><option value="none">default</option>';$.each(b,function(e,t){w+='<option value="'+t+'">'+e+"</option>"});w+="</select>";$formTheme=e._label({label:"Themes",name:"form.labelDisplay"}).append($(w));$("select",$formTheme).change(function(e){$("#builderPanel").removeClass().addClass($(this).val());t.settings.themeText=$(this).val();f._updateSettings(f)}).val(""+(t.settings.themeText!=null?t.settings.themeText:"none"));$(document).ready(function(){$("select",$formTheme).trigger("change")});var E=e._label({label:"Display label/field",name:"form.labelDisplay"}).append('<select id="form.labelDisplay">	        		<option value="0">Label on top</option>	        		<option value="1">Label on left</option>        			<option value="2">Label on right</option>        		</select>        		');$("select",E).change(function(e){if($(this).val()=="1"||$(this).val()=="2"||$(this).val()=="true"){$(".fullLengthLabel").removeClass("fullLengthLabel").addClass("customLengthLabel");$(".fullLengthField").removeClass("fullLengthField").addClass("customLengthField");var n=$(".widthSetterSlider");var r=t.settings.labelWidth!=null?t.settings.labelWidth:43;var i=t.settings.labelHeight!=null?t.settings.labelHeight:53;var s=(100-(r+i))/2-1;var o=r+s;$(".customLengthLabel").css("width",o-s+"%");if($(this).val()=="1"){$(".customLengthLabel").css("text-align","")}else{$(".customLengthLabel").css("text-align","right")}$(".customLengthField").css("width",100-o-s-2+"%");setWidthSetter();$("a",n).height($("a",n).parent().parent().parent().height()-24);$(".widthSetterSlider").show();setImageWidthAndHeight()}else{$(".customLengthLabel").removeClass("customLengthLabel").addClass("fullLengthLabel").css("width","").css("text-align","");$(".customLengthField").removeClass("customLengthField").addClass("fullLengthField").css("width","");$(".widthSetterSlider").hide();setImageWidthAndHeight()}t.settings.labelDisplay=$(this).val();f._updateSettings(f)});$("select",E).val(""+(t.settings.labelDisplay!=null?t.settings.labelDisplay:false));$(document).ready(function(){$("select",E).trigger("change")});var S=e._label({label:"Heading",name:"form.heading"}).append('<select> 				<option value="h1">Heading 1</option> 				<option value="h2">Heading 2</option> 				<option value="h3">Heading 3</option> 				<option value="h4">Heading 4</option> 				<option value="h5">Heading 5</option> 				<option value="h6">Heading 6</option> 			</select>');$("select",S).val(a.heading).attr("id","form.heading").change(function(e){var n=$(this).val();var r=$(a.heading,l).text();var i=$("<"+n+' class="heading">'+r+"</"+n+">");if(a.styles.fontStyles[0]===0){i.css("fontWeight","normal")}if(a.styles.fontStyles[1]==1){i.css("fontStyle","italic")}if(a.styles.fontStyles[2]==1){i.css("textDecoration","underline")}if(t.settings.styles.heading){i.css("color",(t.settings.styles.heading.color=="transparent"?"":"#")+t.settings.styles.heading.color)}$(a.heading,l).replaceWith(i);a.heading=n;f._updateSettings(f)});var x=e._horizontalAlignment({name:"form.horizontalAlignment",value:a.classes[0]});$("select",x).change(function(e){var t=$(this).val();l.removeClass(a.classes[0]).addClass(t);a.classes[0]=t;f._updateSettings(f)});a.styles.fontFamily=a.styles.fontFamily=="default"?t._fontFamily:a.styles.fontFamily;a.styles.fontSize=a.styles.fontSize=="default"?t._fontSize:a.styles.fontSize;var T=e._fontPanel({fontFamily:a.styles.fontFamily,fontSize:a.styles.fontSize,fontStyles:a.styles.fontStyles,idPrefix:"form.",nofieldset:true});$("input[id$='form.bold']",T).change(function(e){if($(this).attr("checked")){$(a.heading,l).css("fontWeight","bold");a.styles.fontStyles[0]=1}else{$(a.heading,l).css("fontWeight","normal");a.styles.fontStyles[0]=0}f._updateSettings(f)});$("input[id$='form.italic']",T).change(function(e){if($(this).attr("checked")){$(a.heading,l).css("fontStyle","italic");a.styles.fontStyles[1]=1}else{$(a.heading,l).css("fontStyle","normal");a.styles.fontStyles[1]=0}f._updateSettings(f)});$("input[id$='form.underline']",T).change(function(e){if($(this).attr("checked")){$(a.heading,l).css("textDecoration","underline");a.styles.fontStyles[2]=1}else{$(a.heading,l).css("textDecoration","none");a.styles.fontStyles[2]=0}f._updateSettings(f)});$("input[id$='form.fontFamily']",T).change(function(e){var t=$(this).val();n.css("fontFamily",t);a.styles.fontFamily=t;f._updateSettings(f)});$("select[id$='form.fontSize']",T).change(function(e){var t=$(this).val();n.css("fontSize",t+"px");a.styles.fontSize=t;f._updateSettings(f)});if(t.settings.styles.color=="default"){t.settings.styles.color=t._color}if(t.settings.styles.backgroundColor=="default"){t.settings.styles.backgroundColor=t._backgroundColor}var N;if(t.settings.styles.form){N=e._colorPanel({form:{color:t.settings.styles.form.color,backgroundColor:t.settings.styles.form.backgroundColor},heading:{color:t.settings.styles.heading.color,backgroundColor:t.settings.styles.heading.backgroundColor},description:{color:t.settings.styles.description.color,backgroundColor:t.settings.styles.description.backgroundColor}})}else{N=e._colorPanel({form:{color:t.settings.styles.color,backgroundColor:t.settings.styles.backgroundColor},heading:{color:"000000",backgroundColor:"transparent"},description:{color:"000000",backgroundColor:"transparent"}})}$("input[id$='form.color']",N).change(function(e){var t=$(this).data("colorPicker").color;n.css("color",(t=="transparent"?"":"#")+t);f.options.settings.styles.form.color=t;if(f.options.settings.styles.form){f.options.settings.styles.form.color=t}else{f.options.settings.styles.form={color:t,backgroundColor:"transparent"};f.options.settings.styles.heading={color:"default",backgroundColor:"transparent"};f.options.settings.styles.description={color:"default",backgroundColor:"transparent"}}f._updateSettings(f)});$("input[id$='heading.color']",N).change(function(e){var t=$(this).data("colorPicker").color;$(".formHeading "+$(document.getElementById("form.heading")).val(),n).css("color",(t=="transparent"?"":"#")+t);f.options.settings.styles.heading.color=t;if(f.options.settings.styles.heading){f.options.settings.styles.heading.color=t}else{f.options.settings.styles.form={color:"default",backgroundColor:"transparent"};f.options.settings.styles.heading={color:t,backgroundColor:"transparent"};f.options.settings.styles.description={color:"default",backgroundColor:"transparent"}}f._updateSettings(f)});$("input[id$='description.color']",N).change(function(e){var t=$(this).data("colorPicker").color;$("#formDescription").css("color",(t=="transparent"?"":"#")+t);if(f.options.settings.styles.description){f.options.settings.styles.description.color=t}else{f.options.settings.styles.form={color:"default",backgroundColor:"transparent"};f.options.settings.styles.heading={color:"default",backgroundColor:"transparent"};f.options.settings.styles.description={color:t,backgroundColor:"transparent"}}f._updateSettings(f)});$("input[id$='form.backgroundColor']",N).change(function(e){var t=$(this).data("colorPicker").color;f._log("background color change: value "+t);n.css("backgroundColor",(t=="transparent"?"":"#")+t);if(f.options.settings.styles.form){f.options.settings.styles.form.backgroundColor=t}else{f.options.settings.styles.form={color:"default",backgroundColor:t};f.options.settings.styles.heading={color:"default",backgroundColor:"transparent"};f.options.settings.styles.description={color:"default",backgroundColor:"transparent"}}f._updateSettings(f)});$("input[id$='heading.backgroundColor']",N).change(function(e){var t=$(this).data("colorPicker").color;f._log("background color change: value "+t);$(".formHeading",n).css("backgroundColor",(t=="transparent"?"":"#")+t);if(f.options.settings.styles.heading){f.options.settings.styles.heading.backgroundColor=t}else{f.options.settings.styles.form={color:"default",backgroundColor:"transparent"};f.options.settings.styles.heading={color:"default",backgroundColor:t};f.options.settings.styles.description={color:"default",backgroundColor:"transparent"}}f._updateSettings(f)});$("input[id$='description.backgroundColor']",N).change(function(e){var t=$(this).data("colorPicker").color;f._log("background color change: value "+t);$("#formDescription").css("backgroundColor",(t=="transparent"?"":"#")+t);if(f.options.settings.styles.description){f.options.settings.styles.description.backgroundColor=t}else{f.options.settings.styles.form={color:"default",backgroundColor:"transparent"};f.options.settings.styles.heading={color:"default",backgroundColor:"transparent"};f.options.settings.styles.description={color:"default",backgroundColor:t}}f._updateSettings(f)});i.append(e._oneColumn(p)).append(e._oneColumn(d)).append(e._oneColumn(y)).append(e._twoColumns($formTheme,E)).append(e._twoColumns(S,x)).append(T);s.append(N)},_languageChange:function(e){$.fb.formbuilder.prototype._log("languageChange("+$(this).val()+", "+$("option:selected",this).text()+")");var t=$.fb.fbWidget.prototype._getFbOptions();var n=$("."+$.fb.fbWidget.prototype.options._styleClass+":visible");var r=$(this).val();var i=$("option:selected",this).text();var s=t.settings[r];var o=$(".formHeading");var u=$(t._formSettingsLanguageSection);var a=$(t._builderPanel);var f,l,c,h,p;$("input[id$='form.name']",u).val(s.name);$("select[id$='form.heading'] option[value='"+s.heading+"']",u).attr("selected","true");var d=$("<"+s.heading+' class="heading">'+s.name+"</"+s.heading+">").css("fontWeight",s.styles.fontStyles[0]==1?"bold":"normal").css("fontStyle",s.styles.fontStyles[1]==1?"italic":"normal").css("textDecoration",s.styles.fontStyles[2]==1?"underline":"none");$(".heading",o).replaceWith(d);$.fb.formbuilder.prototype._log("formSettings.fontStyles[2] = "+s.styles.fontStyles[2]);$("input[id$='form.bold']",u).attr("checked",s.styles.fontStyles[0]);$("input[id$='form.italic']",u).attr("checked",s.styles.fontStyles[1]);$("input[id$='form.underline']",u).attr("checked",s.styles.fontStyles[2]);o.removeClass("leftAlign centerAlign rightAlign").addClass(s.classes[0]);$("select[id$='form.horizontalAlignment'] option[value='"+s.classes[0]+"']",u).attr("selected","true");s.styles.fontFamily=s.styles.fontFamily=="default"?t._fontFamily:s.styles.fontFamily;s.styles.fontSize=s.styles.fontSize=="default"?t._fontSize:s.styles.fontSize;a.css("fontFamily",s.styles.fontFamily);a.css("fontSize",s.styles.fontSize+"px");$("select[id$='form.fontSize']",u).val(s.styles.fontSize);$(".fontPicker",u).fontPicker("fontFamily",s.styles.fontFamily);n.each(function(n){var s=$(this);h=s.attr("class").indexOf($.fb.fbWidget.prototype.options._selectedClass)>-1;if(h){$(t._fieldSettingsLanguageSection+" legend").text("Language: "+i)}if(!s.data("fbWidget")){var o=s.find("input[id$='fields["+s.attr("rel")+"].settings']");s.data("fbWidget",$.parseJSON(unescape(o.val())))}f=s.data("fbWidget");$.fb.formbuilder.prototype._log(n+") settings = "+f);l=s.find("input[id$='fields["+s.attr("rel")+"].type']").val();$.fb.formbuilder.prototype._log("type = "+l);$this=$("#"+l).data("fb"+l);p={target:$this,item:s,settings:f[r]};p.item.selected=h;if(h){$this._createFieldSettings(e,s)}$this._languageChange(e,p)})},_updateSettings:function(e){$("#settings").val($.toJSON(e.options.settings)).change()},_initWidgetsEventBinder:function(){var e=$("."+$.fb.fbWidget.prototype.options._styleClass);var t=e.size();if(t>0){var n,r;var i=["name","settings","sequence"];$(this.options._emptyBuilderPanel+":visible").hide();e.each(function(e){n=$(this);r=n.find("input[id$='fields["+e+"].type']").val();n.click($["fb"]["fb"+r].prototype._createFieldSettings);for(var t=0;t<i.length;t++){n.find("input[id$='fields["+e+"]."+i[t]+"']").change($.fb.fbWidget.prototype._updateStatus)}});if(!this.options.readOnly){e.find(".closeButton").click($.fb.fbWidget.prototype._deleteWidget).mouseover(function(){$("span",this).removeClass("ui-icon-close").addClass("ui-icon-circle-close")}).mouseout(function(){$("span",this).removeClass("ui-icon-circle-close").addClass("ui-icon-close")})}}},_initSortableWidgets:function(){var e=$(this.options._formControls);e.sortable({axis:"y",cursor:"move",distance:10,helper:function(e,t){return $(t).clone().css($.fb.formbuilder.prototype.options._dragBoxCss)},start:function(e,t){var n=$(t.item).prev();if(n.attr("rel")){t.item.prevIndex=n.attr("rel");t.item.originalOffsetTop=n.offset().top}},update:$.fb.formbuilder.prototype._updateSequence});e.disableSelection()},_updateSequence:function(e,t){var n=$(t.item);var r;var i=t.offset.top>t.item.originalOffsetTop;$.fb.formbuilder.prototype._log("moveDown = "+i+", ui.offset.top = "+t.offset.top+", ui.item.originalOffsetTop = "+t.item.originalOffsetTop);if(t.item.prevIndex){var s='[rel="'+t.item.prevIndex+'"]';if(i){r=n.prevUntil(s);$.fb.formbuilder.prototype._moveDown(n,r)}else{$.fb.formbuilder.prototype._getSequence(n).val($.fb.formbuilder.prototype._getSequence(n.next()).val()).change();r=n.nextUntil(s);r.each(function(e){$.fb.formbuilder.prototype._increaseSequence($(this))});$.fb.formbuilder.prototype._increaseSequence($(s))}}else{r=n.prevAll();$.fb.formbuilder.prototype._moveDown(n,r)}},_init:function(){this._log("FormBuilder._init called.");this.method1("calling from FormBuilder._init")},destroy:function(){this._log("FormBuilder.destroy called.");$.Widget.prototype.destroy.call(this)},_log:function(e){if(window.console&&window.console.log)window.console.log(e)},_moveDown:function(e,t){$.fb.formbuilder.prototype._getSequence(e).val($.fb.formbuilder.prototype._getSequence(e.prev()).val()).change();t.each(function(e){$.fb.formbuilder.prototype._decreaseSequence($(this))})},_getSequence:function(e){return e.find("input[id$='fields["+e.attr("rel")+"].sequence']")},_increaseSequence:function(e){if(e.is(":visible")){var t=$.fb.formbuilder.prototype._getSequence(e);t.val(t.val()*1+1);t.change()}},_decreaseSequence:function(e){if(e.is(":visible")){var t=$.fb.formbuilder.prototype._getSequence(e);t.val(t.val()-1);t.change()}},method1:function(e){this._log("FormBuilder.method1 called. params = "+e)}};$.widget("fb.formbuilder",FormBuilder);var FbWidget={options:{_styleClass:"ctrlHolder",_selectedClass:"ctrlHolderSelected"},_log:function(e){if(window.console&&window.console.log)window.console.log(e)},_create:function(){this._log("FbWidget._create called.")},_init:function(){this._log("FbWidget._init called.");this.element.click(this._createFbWidget)},destroy:function(){this._log("FbWidget.destroy called.");this.element.button("destroy");$.Widget.prototype.destroy.call(this)},_getFbOptions:function(){return $($.fb.formbuilder.prototype.options._id).formbuilder("option")},_getFbLocalizedSettings:function(){return $($.fb.formbuilder.prototype.options._id).formbuilder("option").settings[$("#language").val()]},_createField:function(e,t,n,r){var i=$.fb.formbuilder.prototype.options;var s=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();s=index1-1;$('<a class="ui-corner-all closeButton" href="#"><span class="ui-icon ui-icon-close">delete this widget</span></a>').prependTo(t).click($.fb.fbWidget.prototype._deleteWidget).mouseover(function(){$("span",this).removeClass("ui-icon-close").addClass("ui-icon-circle-close")}).mouseout(function(){$("span",this).removeClass("ui-icon-circle-close").addClass("ui-icon-close")});t.attr("rel",index1);var o=e+""+index1;var u=n._html.split("</span>");t.append($.fb.fbWidget.prototype._createFieldProperties(e,n,r,index1));$(i._emptyBuilderPanel+":visible").hide()},_propertyName:function(e){var t;t=e.replace(/ /gi,"");t=t.charAt(0).toLowerCase()+t.substring(1);return t},_deleteWidget:function(e){var t=$(e.target).parent().parent();var n=$(".closeButton",t);var r=t.attr("rel");var i=$.fb.fbWidget.prototype.options;var s=$.fb.formbuilder.prototype.options;var o=new Array;$(".ctrlHolder:not(.deletedCtrlHolder)").each(function(){var e=$(this);var n=e.attr("rel");if(e.find("input[id$='fields["+n+"].type']").val()=="FormulaField"){var i=$.parseJSON(unescape(e.find("input[id$='fields["+n+"].settings']").val()));if($.inArray(t.find("input[id$='fields["+r+"].name']").val(),i[$("#language").val()].value)>-1){o[o.length]=i[$("#language").val()].label}}});if(o.length>0){var u="This field is used in Calculated Field: ";for(var a=0;a<o.length;a++){u+=o[a]+(a<o.length-1?", ":"")}t.qtip({content:u,position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});e.stopPropagation();return}if(t.find("input[id$='fields["+r+"].id']").val()=="null"){t.remove();setWidthSetter()}else{t.find("input[id$='fields["+r+"].status']").val("D");n.after('<a class="ui-corner-all undoButton" title="Undo Delete" href="#"><span class="ui-icon ui-icon-arrowreturnthick-1-w">undo delete this widget</span></a>');var f=$(".undoButton",t);f.click($.fb.fbWidget.prototype._undoDeleteWidget);n.hide();t.addClass("deletedCtrlHolder");t.qtip({content:"Field deleted. To Undo, click here.",position:{my:"bottom right",at:"top right"},show:{event:"mouseover",effect:function(){$(this).show("drop",{direction:"up"})}},hide:"mouseout",style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}})}var l=$("."+i._styleClass+":visible");$.fb.fbWidget.prototype._log("_deleteWidget(). $ctrlHolders.size() = "+l.size());$(s._paletteTabs).tabs("select",0);$(".ctrlHolderSelected").removeClass("ctrlHolderSelected");if(l.size()===0){$(s._emptyBuilderPanel).show()}e.stopPropagation();return false},_undoDeleteWidget:function(e){var t=$("#builderForm div.ctrlHolder:not(.deletedCtrlHolder)");var n=t.size();if(maxFormControls<=n){$("."+$.fb.fbWidget.prototype.options._styleClass+":first").qtip({content:"Can not undo. Number of used controls can not be more than "+maxFormControls+". Please contact administrator.",position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});return false}var r=$(e.target).parent().parent();var i=$(".undoButton",r);var s=r.attr("rel");var o=r.find("input[id$='fields["+s+"].type']").val();if(o=="Paypal"){var u=false;t.each(function(){var e=$(this);if($("input[id$='fields["+$(this).attr("rel")+"].type']",e).val()=="Paypal"){u=true}});if(u){r.qtip({content:ppOne,position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});e.stopPropagation();return false}}if(o=="FormulaField"){var a=new Array;var f=$.parseJSON(unescape(r.find("input[id$='fields["+s+"].settings']").val()));var l=f[$("#language").val()].value;$(".deletedCtrlHolder").each(function(){var e=$(this);var t=e.attr("rel");if($.inArray(e.find("input[id$='fields["+t+"].name']").val(),l)>-1){var n=$.parseJSON(unescape(e.find("input[id=fields["+t+"].settings]").val()));a[a.length]=n[$("#language").val()].label}});if(a.length>0){var c="The Calculated Field has following reference(s) which is/are deleted: ";for(var h=0;h<a.length;h++){c+=a[h]+(h<a.length-1?", ":"")}r.qtip({content:c,position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});e.stopPropagation();return false}}i.remove();$(".closeButton",r).show();r.find("input[id$='fields["+s+"].status']").val("");r.removeClass("deletedCtrlHolder");r.qtip("destroy");r.removeAttr("title");e.stopPropagation();return false},_createFieldProperties:function(e,t,n,r){var i="fields["+r+"].";var s=$('<div class="fieldProperties" id="'+r+'"> 		<input type="hidden" id="'+i+'id" name="'+i+'id" value="null" /> 		<input type="hidden" id="'+i+'name" name="'+i+'name" value="field'+(new Date).getTime()+'" /> 		<input type="hidden" id="'+i+'type" name="'+i+'type" value="'+t._type+'" /> 		<input type="hidden" id="'+i+'settings" name="'+i+'settings" /> 		<input type="hidden" id="'+i+'sequence" name="'+i+'sequence" value="'+r+'" /> 		<input type="hidden" id="'+i+'status" name="'+i+'status" /> 		</div>');s.find("input[id$='"+i+"settings']").val($.toJSON(n));return s},_createFieldProperties1:function(e,t,n,r){var i="fields["+r+"].";var s=$('<div class="fieldProperties" id="'+r+'"> 		<input type="hidden" id="'+i+'id" name="'+i+'id" value="null" /> 		<input type="hidden" id="'+i+'name" name="'+i+'name" value="'+e+'" /> 		<input type="hidden" id="'+i+'type" name="'+i+'type" value="PlainText" /> 		<input type="hidden" id="'+i+'settings" name="'+i+'settings" /> 		<input type="hidden" id="'+i+'sequence" name="'+i+'sequence" value="'+r+'" /> 		<input type="hidden" id="'+i+'status" name="'+i+'status" /> 		</div>');s.find("input[id$='"+i+"settings']").val($.toJSON(n));return s},_updateStatus:function(e){$widget=$(e.target);$.fb.fbWidget.prototype._log($widget.attr("id")+" updated");if($widget.parent().find("input:first").val()!="null"){$.fb.fbWidget.prototype._log("field status updated");$widget.parent().find("input:last").val("U")}},_createFbWidget:function(e){var t=$(this);var n=$("#builderForm div.ctrlHolder:not(.deletedCtrlHolder)");var r=n.size();if(maxFormControls<=r){$("."+$.fb.fbWidget.prototype.options._styleClass+":first").qtip({content:"Can not create controls more than "+maxFormControls+". Please contact administrator.",position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});e.stopPropagation();return null}var i="";var s="";try{if(this.id){s=this.id}if(s=="")i=this.options._type}catch(o){}if(s=="Paypal"||i=="Paypal"){if(ppb){$("#Paypal").qtip({content:ppbMsg,position:{my:"bottom left",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});e.stopPropagation();return null}else{var u=false;n.each(function(){var e=$(this);if($("input[id$='fields["+$(this).attr("rel")+"].type']",e).val()=="Paypal"){u=true}});if(u){$("html, body").stop().animate({scrollTop:0},100,"easeInOutExpo");$("#Paypal").qtip({content:ppOne,position:{my:"bottom left",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});e.stopPropagation();return null}}}$.fb.fbWidget.prototype._log("_createFbWidget executing. event.type = "+e.type);var a;if(this.options){a=this}else{var f="fb"+$(this)["fbWidget"]("option","_type");$.fb.fbWidget.prototype._log("type = "+f);a=$(this).data(f)}var l=jQuery.extend(true,{},a.options.settings);var c=a._getCounter(a);var h=a.options._languages;for(var p=0;p<h.length;p++){l[h[p]][a.options._counterField]+=" "+c;a._log(l[h[p]][a.options._counterField])}var d=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();index1=index1==0?d:++index1;var v=$('<div class="'+a.options._styleClass+'" rel="'+index1+'"></div>').hide();v.data("fbWidget",l);a._log("b4. text = "+l[$("#language").val()].text);var m={target:a,item:v,settings:l[$("#language").val()],_settings:l};var g=a._getWidget(e,m);a._log("at. text = "+l[$("#language").val()].text);var y=document.getElementById("form.labelDisplay").value;if(y=="1"||y=="2"){try{$(".fullLengthLabel",g).removeClass("fullLengthLabel").addClass("customLengthLabel").css("width",$(".customLengthLabel").css("width")).css("text-align",y=="1"?"":"right");$(".fullLengthField",g).removeClass("fullLengthField").addClass("customLengthField").css("width",$(".customLengthField").css("width"))}catch(o){}}v.append(g);if(e.type=="click"||e.type=="drop"){var b=a._propertyName(a.options._type+c);g.click(a._createFieldSettings);a._createField(b,v,a.options,l);if(e.type=="click"){$($.fb.formbuilder.prototype.options._formControls).append(v).sortable("refresh");v.toggle("slide",{direction:"up"},"slow");a._scroll(e);e.preventDefault();setWidthSetter()}else{return v}}else{return v.show()}a._log("_createFbWidget executed")},_scroll:function(e){var t=$($.fb.formbuilder.prototype.options._builderPanel);this._log("builderPanel: min-height = "+t.css("minHeight")+", height = "+t.css("height"));var n=t.css("minHeight");var r=t.css("height");n=n.substring(0,n.lastIndexOf("px"))*1;r=r.substring(0,r.lastIndexOf("px"))*1;if(r>n){this._log("builderPanel: scrolling... height: "+r+", minHeight: "+n);var i=r-n;this._log("y = "+i);$("html, body").stop().animate({scrollTop:i},1500,"easeInOutExpo")}},_createFieldSettings:function(e,t){$.fb.fbWidget.prototype._log("_createFieldSettings executing.");if(!t){t=$(this)}var n=$.fb.fbWidget.prototype.options._selectedClass;t=t.attr("class").indexOf($.fb.fbWidget.prototype.options._styleClass)>-1?t:t.parent();t.parent().find("."+n).removeClass(n);t.addClass(n);var r=t.find("input[id$='fields["+t.attr("rel")+"].name']").val();var i="";if(r.indexOf("check")>=0){i="CheckBox"}if(r.indexOf("group")>=0){i="GroupButton"}if(r.indexOf("check")<0&&r.indexOf("group")<0){i=t.find("input[id$='fields["+t.attr("rel")+"].type']").val()}$.fb.fbWidget.prototype._log("type = "+i);var s=$("#"+i).data("fb"+i);var o=s._getFbOptions();s._log("$widget.text() = "+t.text()+", fbOptions.readOnly = "+o.readOnly);if(!t.data("fbWidget")){var u=t.find("input[id$='fields["+t.attr("rel")+"].settings']");s._log("_createFieldSettings. unescaped settings = "+unescape(u.val()));t.data("fbWidget",$.parseJSON(unescape(u.val())))}var a=t.data("fbWidget");var f=$(o._fieldSettingsLanguageSection);var l=$("#language");$("legend",f).text("Widget: "+(i=="PlainText"?"Rich Text":i=="LinkVideo"?"Embed HTML":i));var c={target:s,item:t,settings:a[l.val()]};var h={target:s,item:t,settings:a};var p=s._getFieldSettingsLanguageSection(e,i=="Paypal"?h:c);f.children(":not(legend)").remove();if($.inArray(i,inputTypeFields)>-1)f.append($("<div><b>Unique id: "+r+"</b></div>"));for(var d=0;d<p.length;d++){f.append(p[d])}p=s._getFieldSettingsGeneralSection(e,h);s._log("fieldSettings.length = "+p.length);var v=$(o._fieldSettingsGeneralSection);v.children().remove();for(var d=0;d<p.length;d++){v.append(p[d])}if(o.readOnly){var m=$(o._fieldSettingsPanel);$("input",m).attr("disabled",true);$("select",m).attr("disabled",true);$("textarea",m).attr("disabled",true)}$.fb.fbWidget.prototype._log("_createFieldSettings. event.type = "+e.type);if(e.type=="click"){$(o._paletteTabs).tabs("select",1);$("input:first",m).select()}$.fb.fbWidget.prototype._log("_createFieldSettings executed.");var g=$('textarea[id$="field.text"]');g.hide();g.css("width",g.parent().parent().innerWidth()*1-28+"px");g.show();$('textarea[id$="field.text"]').htmlarea({loaded:function(){$(this.editor).keyup(function(e){return true})}});checkScroll()},_getCounter:function(e){var t=$("."+e.options._styleClass+":visible:not(."+this._getFbOptions()._draggableClass+")");var n=1;if(t.size()>0){var r,i,s;var o=e._propertyName(e.options._type);t.each(function(t){r=$(this);i=r.attr("rel");s=r.find("input[id$='fields["+i+"].type']").val();if(s.toLowerCase().indexOf(o.toLowerCase())>-1){e._log("Counter = "+n);n++}})}e._log("counter = "+n);return n},_updateSettings:function(e){var t=e.data("fbWidget");this._log("_updateSettings: \n"+$.toJSON(t));var n=e.find("input[id$='fields["+e.attr("rel")+"].settings']");n.val($.toJSON(t)).change()},_updateName:function(e,t){},_threeColumns:function(e,t,n){return $('<div class="threeCols"></div>').append(e.addClass("col1")).append(t.addClass("col2")).append(n.addClass("col3"))},_twoColumns:function(e,t){return $('<div class="twoCols"></div>').append(e.addClass("labelOnTop col1 noPaddingBottom")).append(t.addClass("labelOnTop col2"))},_oneColumn:function(e){return e.addClass("clear labelOnTop")},_help:function(e){var t;if(e.description){t=$('<span> (<a href="#" title="'+e.description+'">?</a>)</span>');var n=$("a",t);n.qtip({content:n.attr("title"),position:{my:"bottom left",at:"top center"},show:{event:"click",effect:function(){$(this).show("drop",{direction:"up"})}},hide:"mouseout",style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}})}return t},_label:function(e){var t=$('<div><label for="'+e.name+'">'+e.label+"</label></div>").append(this._help(e));if(!e.nobreak)t.append("<br />");return t},_horizontalAlignment:function(e){var t=$.extend({},e);t.label=t.label?t.label:"Horizontal Align";var n=this._label(t).append('<select> 			<option value="leftAlign">left</option> 			<option value="centerAlign">center</option> 			<option value="rightAlign">right</option> 		</select>');$("select",n).val(t.value).attr("id",t.name);return n},_verticalAlignment:function(e){var t=$.extend({},e);t.label=t.label?t.label:"Vertical Align";var n=this._label(t).append('<select> 				<option value="topAlign">top</option> 				<option value="middleAlign">middle</option> 				<option value="bottomAlign">bottom</option> 			</select></div>');$("select",n).val(t.value).attr("id",t.name);return n},_name:function(e){var t=e.attr("rel");var n=$('<label for="field.name">Name (?)</label><br/>  				  <input type="text" id="field.name" />');$("input[id$='field.name']",n).val(e.find("input[id$='fields["+t+"].name']").val()).keyup(function(n){e.find("input[id$='fields["+t+"].name']").val($(n.target).val()).change()});return n},_colorPicker:function(e){var t;if(e.label){t=this._label(e)}else{t=$("<div></div>")}if(!e.type||e.type=="basic"){t.colorPicker({name:e.name,value:e.value,ico:imageSourceDir+"/images/jquery.colourPicker.gif",disabledIco:imageSourceDir+"/images/jquery.colourPicker.disabled.gif",title:"Basic Colors",disabled:this._getFbOptions().readOnly})}else{t.colorPicker({name:name,value:value,ico:imageSourceDir+"/images/jquery.colourPicker.gif",disabledIco:imageSourceDir+"/images/jquery.colourPicker.disabled.gif",title:"Web Safe Colors",type:"webSafe",width:360,disabled:this._getFbOptions().readOnly})}return t},_fontPicker:function(e){var t=$.extend({},e);this._log("fontPicker("+$.toJSON(t)+")");t.value=t.value!="default"?t.value:this._getFbOptions()._fontFamily;if(!t.label)t.label="Font";var n=this._label(t).append('<div class="fontPicker" rel="'+t.name+'"></div>');$(".fontPicker",n).fontPicker({name:t.name,defaultFont:t.value,disabled:this._getFbOptions().readOnly});return n},_fontSize:function(e){this._log("fontSize("+$.toJSON(e)+")");e.nobreak=true;var t=this._label(e).append(' <select> 		    <option value="9">9</option> 		    <option value="10">10</option> 		    <option value="11">11</option> 		    <option value="12">12</option> 		    <option value="13">13</option> 		    <option value="14">14</option> 		    <option value="15">15</option> 		    <option value="16">16</option> 		    <option value="17">17</option> 		    <option value="18">18</option> 		    <option value="20">20</option> 		    <option value="22">22</option> 		    <option value="24">24</option> 		    <option value="28">28</option> 		    <option value="32">32</option> 		  </select>');var n=$("select",t);if(e.value=="default"){n.val(this._getFbOptions().settings.styles.fontSize)}else{n.val(e.value)}n.attr("id",e.name);return t},_fontStyles:function(e){var t=e.names;var n=e.checked;var r=$('<div> 		  <input type="checkbox" id="'+t[0]+'" /> Bold<br /> 	    <input type="checkbox" id="'+t[1]+'" /> Italic<br /> 	    <input type="checkbox" id="'+t[2]+'" /> Underline 	  </div>');if(n){for(var i=0;i<n.length;i++){$("input[id$='"+t[i]+"']",r).attr("checked",n[i])}}return r},_twoRowsOneRow:function(e,t,n){var r=$('<div class="twoRowsOneRow"> 			    <div class="row1col1"> 			      <div class="row2col1"> 			      </div> 			    </div> 			    <div class="row1col2"> 			    </div> 			  </div>');$(".row1col1",r).prepend(e);$(".row2col1",r).append(t);$(".row1col2",r).append(n);return r},_fieldset:function(e){return $("<fieldset "+(e["class"]?'class="'+e["class"]+'"':"")+"><legend>"+e.text+"</legend></fieldset>")},_fontPanel:function(e){var t=e.idPrefix?e.idPrefix:"";var n=[t+"bold",t+"italic",t+"underline"];var r=this._twoRowsOneRow(this._fontPicker({name:t+"fontFamily",value:e.fontFamily}),this._fontSize({label:"Size",name:t+"fontSize",value:e.fontSize}),this._fontStyles({names:n,checked:e.fontStyles}).css("paddingLeft","2em"));if(e.nofieldset)return r;else return this._fieldset({text:"Fonts"}).append(r)},_colorPanel:function(e){var t=$.extend({},e);if(t.form.color=="default"){t.form.color=this._getFbOptions().settings.styles.color}if(t.form.backgroundColor=="default"||t.form.backgroundColor=="rgba(0, 0, 0, 0)"){t.form.backgroundColor="transparent"}var n=this._fieldset({text:"Colors"}).append(this._threeColumns($("<div></div>"),$("<div>Text</div>"),$("<div>Background</div>")).css("paddingBottom","2px")).append(this._threeColumns($("<div>Form</div>"),this._colorPicker({name:"form.color",value:t.form.color}),this._colorPicker({name:"form.backgroundColor",value:t.form.backgroundColor}))).append(this._threeColumns($("<div>Heading</div>"),this._colorPicker({name:"heading.color",value:t.heading.color}),this._colorPicker({name:"heading.backgroundColor",value:t.heading.backgroundColor}))).append(this._threeColumns($("<div>Description</div>"),this._colorPicker({name:"description.color",value:t.description.color}),this._colorPicker({name:"description.backgroundColor",value:t.description.backgroundColor})));n.css("paddingTop","0.5em");$("input",n).addClass("floatClearLeft");$(".col1",n).css("verticalAlign","top");return n},_labelValueDescriptionColorPanel:function(e){var t=$.extend({},e);var n=this._getFbOptions().settings.styles;if(t.label.color=="default"){t.label.color=n.color}if(t.label.backgroundColor=="default"){t.label.backgroundColor=n.backgroundColor}if(t.description.color=="default"){t.description.color=n.color}if(t.description.backgroundColor=="default"){t.description.backgroundColor=n.backgroundColor}var r=this._fieldset({text:"Colors"}).append(this._threeColumns($("<div></div>"),$("<div>Text</div>"),$("<div>Background</div>")).css("paddingBottom","2px")).append(this._threeColumns($("<div>Label</div>"),this._colorPicker({name:"field.label.color",value:t.label.color}),this._colorPicker({name:"field.label.backgroundColor",value:t.label.backgroundColor}))).append(this._threeColumns($("<div>Value</div>"),this._colorPicker({name:"field.value.color",value:t.value.color}),this._colorPicker({name:"field.value.backgroundColor",value:t.value.backgroundColor}))).append(this._threeColumns($("<div>Description</div>"),this._colorPicker({name:"field.description.color",value:t.description.color}),this._colorPicker({name:"field.description.backgroundColor",value:t.description.backgroundColor})));r.css("paddingTop","0.5em");$("input",r).addClass("floatClearLeft");$(".col1",r).css("verticalAlign","top");return r},_labelColorPanel:function(e){var t=$.extend({},e);var n=this._getFbOptions().settings.styles;if(t.color=="default"){t.color=n.color}if(t.backgroundColor=="default"){t.backgroundColor=n.backgroundColor}var r=this._fieldset({text:"Colors"}).append(this._threeColumns($("<div></div>"),$("<div>Text</div>"),$("<div>Background</div>")).css("paddingBottom","2px")).append(this._threeColumns($("<div>Label</div>"),this._colorPicker({name:"field.color",value:t.color}),this._colorPicker({name:"field.backgroundColor",value:t.backgroundColor})));r.css("paddingTop","0.5em");$("input",r).addClass("floatClearLeft");$(".col1",r).css("verticalAlign","top");return r},_getWidget:function(e,t){$.fb.fbWidget.prototype._log("getWidget(event, fb) should be overriden by subclass.")},_getFieldSettingsLanguageSection:function(e,t){$.fb.fbWidget.prototype._log("getFieldSettingsLanguageSection(event, fb) should be overriden by subclass.")},_getFieldSettingsGeneralSection:function(e,t){$.fb.fbWidget.prototype._log("getFieldSettingsLanguageSection(event, fb) should be overriden by subclass.")},_languageChange:function(e,t){$.fb.fbWidget.prototype._log("_languageChange(event, fb) should be overriden by subclass.")}};$.widget("fb.fbWidget",FbWidget);var ColorPicker={options:{name:"jquery-color-picker",value:"",ico:"ico.gif",disabledIco:"ico.gif",title:"Pick a colour",inputBG:true,showColorCode:false,speed:500,openTxt:"Open colour picker",type:"basic",width:180,basicColors:["ffffff","ffccc9","ffce93","fffc9e","ffffc7","9aff99","96fffb","cdffff","cbcefb","cfcfcf","fd6864","fe996b","fffe65","fcff2f","67fd9a","38fff8","68fdff","9698ed","c0c0c0","fe0000","f8a102","ffcc67","f8ff00","34ff34","68cbd0","34cdf9","6665cd","9b9b9b","cb0000","f56b00","ffcb2f","ffc702","32cb00","00d2cb","3166ff","6434fc","656565","9a0000","ce6301","cd9934","999903","009901","329a9d","3531ff","6200c9","343434","680100","963400","986536","646809","036400","34696d","00009b","303498","000000","330001","643403","663234","343300","013300","003532","010066","340096"],webSafeColors:["000000","000033","000066","000099","0000CC","0000FF","003300","003333","003366","003399","0033CC","0033FF","006600","006633","006666","006699","0066CC","0066FF","009900","009933","009966","009999","0099CC","0099FF","00CC00","00CC33","00CC66","00CC99","00CCCC","00CCFF","00FF00","00FF33","00FF66","00FF99","00FFCC","00FFFF","330000","330033","330066","330099","3300CC","3300FF","333300","333333","333366","333399","3333CC","3333FF","336600","336633","336666","336699","3366CC","3366FF","339900","339933","339966","339999","3399CC","3399FF","33CC00","33CC33","33CC66","33CC99","33CCCC","33CCFF","33FF00","33FF33","33FF66","33FF99","33FFCC","33FFFF","660000","660033","660066","660099","6600CC","6600FF","663300","663333","663366","663399","6633CC","6633FF","666600","666633","666666","666699","6666CC","6666FF","669900","669933","669966","669999","6699CC","6699FF","66CC00","66CC33","66CC66","66CC99","66CCCC","66CCFF","66FF00","66FF33","66FF66","66FF99","66FFCC","66FFFF","990000","990033","990066","990099","9900CC","9900FF","993300","993333","993366","993399","9933CC","9933FF","996600","996633","996666","996699","9966CC","9966FF","999900","999933","999966","999999","9999CC","9999FF","99CC00","99CC33","99CC66","99CC99","99CCCC","99CCFF","99FF00","99FF33","99FF66","99FF99","99FFCC","99FFFF","CC0000","CC0033","CC0066","CC0099","CC00CC","CC00FF","CC3300","CC3333","CC3366","CC3399","CC33CC","CC33FF","CC6600","CC6633","CC6666","CC6699","CC66CC","CC66FF","CC9900","CC9933","CC9966","CC9999","CC99CC","CC99FF","CCCC00","CCCC33","CCCC66","CCCC99","CCCCCC","CCCCFF","CCFF00","CCFF33","CCFF66","CCFF99","CCFFCC","CCFFFF","FF0000","FF0033","FF0066","FF0099","FF00CC","FF00FF","FF3300","FF3333","FF3366","FF3399","FF33CC","FF33FF","FF6600","FF6633","FF6666","FF6699","FF66CC","FF66FF","FF9900","FF9933","FF9966","FF9999","FF99CC","FF99FF","FFCC00","FFCC33","FFCC66","FFCC99","FFCCCC","FFCCFF","FFFF00","FFFF33","FFFF66","FFFF99","FFFFCC","FFFFFF"],customColors:[],disabled:false},_init:function(){var e=this.options.disabled?this.options.disabledIco:this.options.ico;this._log("ColorPicker._init called.");this.element.append('<input type="text" id="'+this.options.name+'" name="'+this.options.name+'" /> 				<a class="floatLeft" href="#" rel="'+this.options.name+'"> 				<img border="0" src="'+e+'" alt="'+this.options.openTxt+'"/></a>');var t=$("input",this.element).attr("readonly",true);var n=this.element.data("colorPicker");var r="colorpicker_"+this.options.type;if(n.options.showColorCode){t.val(this.options.value)}else{t.attr("disabled","true")}t.data("colorPicker",{color:this.options.value});var i=$("#"+r);if(i.length==0&&!this.options.disabled){var s="";var o=this.options[this.options.type+"Colors"];var u;s+='<li style="width:100%;background-repeat: no-repeat;"><a class="noColor" href="#" style="background-image: url('+imageSourceDir+'/images/transparent1.png);" title="None" rel="transparent">'+"None</a></li>";for(var a=0;a<o.length;a++){u=o[a];if(u!="")s+='<li><a href="#" title="'+u+'" rel="'+u+'" style="background: #'+u+"; color: "+this._hexInvert(u)+';">'+u+"</a></li>"}var f=this.options.title?"<h2>"+this.options.title+"</h2>":"";i=$('<div id="'+r+'" class="colorPicker">'+f+"<ul>"+s+"</ul>"+"</div>").appendTo(document.body).hide();$(document.body).click(function(e){if(!($(e.target).is(".colorPicker")||$(e.target).parents(".colorPicker").length)){i.hide(n.options.speed)}})}if(this.options.inputBG){var l=this.options.value;if(l.length==6)l="#"+l;if(l=="transparent")t.css({background:"url("+imageSourceDir+"/images/transparent1.png)",color:l});else t.css({background:l,color:"#"+this._hexInvert(l)})}if(!this.options.disabled){var c=$("a",this.element);c.click(function(){if(this.className=="noColor"){var e=c.offset();i.css({position:"absolute",left:e.left+"px",top:e.top+"px"}).show(n.options.speed).attr("rel",c.attr("rel"))}else{var e=c.offset();i.css({position:"absolute",left:e.left+"px",top:e.top+"px",width:n.options.width+"px"}).show(n.options.speed).attr("rel",c.attr("rel"))}return false})}$("a",i).click(function(e){var t=$("input[id$='"+i.attr("rel")+"']");var r=$(this).attr("rel");if(this.className=="noColor"){var s=t.parent().data("colorPicker").options;if(s.showColorCode){t.val(r)}t.data("colorPicker",{color:r});if(s.inputBG){t.css({background:"url("+imageSourceDir+"/images/transparent1.png)",color:r})}t.change()}else{$.fb.colorPicker.prototype._log("colorPicker. input id = "+i.attr("rel")+", hex = "+r+", title = "+$(this).attr("title")+", text = "+$(this).text());var s=t.parent().data("colorPicker").options;if(s.showColorCode){t.val(r)}t.data("colorPicker",{color:r});if(s.inputBG){t.css({background:"#"+r,color:"#"+n._hexInvert(r)})}t.change()}i.hide(n.options.speed);e.stopImmediatePropagation();return false})},_log:function(e){if(window.console&&window.console.log)window.console.log(e)},_hexInvert:function(e){var t=e.substr(0,2);var n=e.substr(2,2);var r=e.substr(4,2);return.212671*t+.71516*n+.072169*r<.5?"ffffff":"000000"}};$.widget("fb.colorPicker",ColorPicker);var FontPicker={fonts:new Array("","Arial,Arial,Helvetica,sans-serif","Arial Black,Arial Black,Gadget,sans-serif","Comic Sans MS,Comic Sans MS,cursive","Courier New,Courier New,Courier,monospace","Georgia,Georgia,serif","Impact,Charcoal,sans-serif","Lucida Console,Monaco,monospace","Lucida Sans Unicode,Lucida Grande,sans-serif","Palatino Linotype,Book Antiqua,Palatino,serif","Tahoma,Geneva,sans-serif","Times New Roman,Times,serif","Trebuchet MS,Helvetica,sans-serif","Verdana,Geneva,sans-serif"),options:{defaultFont:"Tahoma",id:"fontbox",name:"fontPickerInput",selClass:"fontPicker",fontclass:"singlefont",speed:100,hoverColor:"#efefff",bgColor:"#ffffee",disabled:false},_log:function(e){if(window.console&&window.console.log)window.console.log(e)},_init:function(){var e=this.options;var t=$("#"+e.id);this.element.parent().append('<input type="hidden" id="'+e.name+'" />');if(!t.length&&!e.disabled){t=$('<div id="'+e.id+'" ></div>').appendTo(document.body).hide();$.each(this.fonts,function(n,r){t.append('<div class="singlefont" onmouseover="this.style.backgroundColor=\''+e.hoverColor+"'\" onmouseout=\"this.style.backgroundColor='"+e.bgColor+'\'" style="font-family: '+r+';" value="'+r+'"> '+(r==""?"Theme Default Font":r.split(",")[0])+"</div>")});$(document.body).click(function(n){if($(n.target).is("."+e.selClass)||$(n.target).is("#"+e.id))return;t.slideUp(e.speed)})}if(!e.disabled){this.element.click(function(){if(t.is(":hidden")){var n=$(this);t.css({position:"absolute",left:n.offset().left+"px",top:n.offset().top+n.height()+3+"px"}).attr("rel",n.attr("rel"));t.slideDown(e.speed)}else t.slideUp(e.speed)})}if(e.defaultFont.length){this.fontFamily(e.defaultFont)}$("."+e.fontclass).click(function(n){var r=$(this);var i=$("input[id$='"+r.parent().attr("rel")+"']");var s=r.attr("value");i.prev().text(r.text()).css("fontFamily",s);i.val(s).change();t.slideUp(e.speed);n.stopImmediatePropagation()})},fontFamily:function(e){this._log("fontFamily("+e+")");var t=e.replace(/'/gi,"");var n=t.split(",",1)[0];this._log("fontFamilyValue = "+t+", fontFamilyText = "+n);this.element.text(n).css("fontFamily",t);$("input",this.element.parent()).val(t)}};$.widget("fb.fontPicker",FontPicker);var checkBoxid="checkBox";var FbCheckBox=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/checkbox.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Checkbox</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"CheckBox",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label><p style="line-height:5px;"> </p></div>                 		<div class="fullLengthField"><div><input type="checkbox" name="mycheckbox" value="My Check 1"><span style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;">My Check 1</span><br></div>						<div><input type="checkbox" name="mycheckbox" value="My Check 2" ><span style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;">My Check 2</span><br></div>						<div><input type="checkbox" name="mycheckbox" value="My Check 3" ><span style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;">My Check 3</span><br></div>                	    <div style="display:none;"><input type="text" name="mycheckbox" placeholder="Other" style="width:auto;"/></div>		                <p class="formHint" style="color: #777777; background-color: #transparent;"></p></div></div>',_counterField:"field1",_languages:["en","zh_CN"],settings:{en:{label:"Check Box",value:["My Check 1","My Check 2","My Check 3"],description:"",classes:[],styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"",value:"",description:"",classes:[],styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,fieldLayout:"oneCol",otherOption:false,restriction:"no",styles:{color:"default",backgroundColor:"default",label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();index1==0?index1=n:index1;var r=$(t.target.options._html);t.target._log("fbCheckBox._getWidget executing...");$("label span",r).text(t.settings.label);if(t._settings.required){$("label em",r).text("*")}var i=1;$("input[type=checkbox]",$(r)).each(function(){$(this).attr("id","checkboxid_"+index1+"_"+i);$(this).removeAttr("checked");$(this).val(t.settings.value[i-1]);i=i+1});$(".formHint",r).text(t.settings.description);t.target._log("fbCheckBox._getWidget executed.");return r},_getFieldSettingsLanguageSection:function(e,t){var n=[];t.target._log("fbCheckBox._getFieldSettingsLanguageSection executing...");var r=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<textarea id="field.label" />');$("textarea",r).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var i=1;var s="<div >";$("input[type=checkbox]",t.item).each(function(){$(this).val(t.settings.value[i-1]);if(i==1){s=s+'<div id="ws'+$(this).attr("id")+'"><input style="width:180px" type="text" id="txt'+$(this).attr("id")+'" /><a href="#" class="AddChoice" id="ChoAdd'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a></div>'}else{s=s+'<div id="ws'+$(this).attr("id")+'"><input style="width:180px" type="text" id="txt'+$(this).attr("id")+'" /><a href="#" class="AddChoice" id="ChoAdd'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a><a href="#" class="RemoveChoice" id="ChoRem'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/images.png" style="width:20px;"></a></div>'}i=i+1});s=s+"</div>";var o=$(s);var u=t.target._fieldset({text:"Choices"}).append(t.target._oneColumn(o));var i=1;$("input[type=text]",u).each(function(){$(this).val(t.settings.value[i-1]).keyup(function(e){var n=$(this).attr("id").replace("txt","");$("#"+n).val($(this).val());$("span",$("#"+n).parent()).text($(this).val());var r=new Array;var i=0;$("input[type=checkbox]",t.item).each(function(){r[i]=$(this).val();i++});t.settings.value=r;t.target._updateSettings(t.item)});i=i+1});var a=function(){var e=confirm("Are you sure?");if(e){var n=new Array;var r=$(this).attr("id").replace("ChoRem","");var i=$("#ws"+r);i.remove();$("#"+r).parent().remove();var s=0;$("input[type=checkbox]",t.item).each(function(){n[s]=$(this).val();s++});t.settings.value=n;t.target._updateSettings(t.item)}return false};$('a[class="RemoveChoice"]',o).click(a);var f=function(){var e=new Array;var n=(new Date).getTime();var r=$(this).attr("id").replace("ChoAdd","");$("#ws"+r).after('<div id="ws'+n+'"><input type="Text" style="width:180px" value="New check Box" id="txt'+n+'"><a href="#" class="AddChoice" id="ChoAdd'+n+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a><a href="#" class="RemoveChoice" id="ChoRem'+n+'"><img src="'+imageSourceDir+'/images/images.png" style="width:20px;"></a></div>');$("#"+r).parent().after('<div><input type="checkbox" name="mycheckbox" value="New Check Box" id="'+n+'" ><span style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;"> New Check Box   </span><br></div>');var i=$("#ws"+n);$('a[class="RemoveChoice"]',i).click(a);$('a[class="AddChoice"]',i).click(f);$("#txt"+n).keyup(function(e){var n=$(this).attr("id").replace("txt","");$("#"+n).val($(this).val());$("span",$("#"+n).parent()).text($(this).val());var r=new Array;var i=0;$("input[type=checkbox]",t.item).each(function(){r[i]=$(this).val();i++});t.settings.value=r;t.target._updateSettings(t.item)});var s=0;$("input[type=checkbox]",t.item).each(function(){e[s]=$(this).val();s++});t.settings.value=e;t.target._updateSettings(t.item);return false};$('a[class="AddChoice"]',o).click(f);var l=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",l).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var c=t.settings.styles;var h=t.target._getFbLocalizedSettings().styles;var p=c.fontFamily!="default"?c.fontFamily:h.fontFamily;var d=c.fontSize!="default"?c.fontSize:h.fontSize;var v=t.target._fontPanel({fontFamily:p,fontSize:d,fontStyles:c.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",v).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");c.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");c.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",v).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");c.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");c.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",v).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");c.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");c.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",v).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);c.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",v).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");c.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbCheckBox._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(r),t.target._oneColumn(l),u,v]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbCheckBox._getFieldSettingsGeneralSection executing...");var n=$("<div>Field Layout</div>");var r=$('<div><select id="field.layout" style="width: 99%"> 				<option value="oneCol">One Column</option> 				<option value="twoCol">Two Column</option> 				<option value="threeCol">Three Column</option>         		<option value="sbs">Side by Side</option> 			</select></div>');var i=$('<div><input type="checkbox" id="field.required" /> Required</div>');var s=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var o=$('<div><input type="checkbox" id="field.showOther" /> Show Other Option</div>');var u=t.target._fieldset({text:"Value"}).append(t.target._twoColumns(n,r)).append(t.target._twoColumns(i,s)).append(o);$(".col1",u).css("width","32%").removeClass("labelOnTop");$(".col2",u).css("marginLeft","34%").removeClass("labelOnTop");$("input",o).attr("checked",t.settings.otherOption?t.settings.otherOption:false).change(function(e){if($(this).attr("checked")){var n=t.item.find("input[type=text]").parent();n.show();t.settings.otherOption=true}else{var n=t.item.find("input[type=text]").parent();n.hide();t.settings.otherOption=false}t.target._updateSettings(t.item)});$("input",o).trigger("change");$("input",i).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",s).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",s).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",i).trigger("change");$("input",s).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",i).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",i).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",s).trigger("change");if(!t.settings.fieldLayout){t.settings.fieldLayout="oneCol"}$("select",r).val(t.settings.fieldLayout).change(function(e){t.settings.fieldLayout=$(this).val();var n=t.item.find(".formHint").parent();if($(n).hasClass("oneCol")){$(n).removeClass("oneCol")}else if(n.hasClass("twoCol")){$(n).removeClass("twoCol")}else if(n.hasClass("threeCol")){$(n).removeClass("threeCol")}else if(n.hasClass("sbs")){$(n).removeClass("sbs")}$(n).addClass(t.settings.fieldLayout);t.target._updateSettings(t.item)}).trigger("change");var a=t.item.find(".textInput");var f=t.settings.styles;if(f.value.color=="default"){f.value.color=a.css("color")}if(f.value.backgroundColor=="default"){f.value.backgroundColor=a.css("backgroundColor")}var l=t.target._labelValueDescriptionColorPanel(f);$("input[id$='field.label.color']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);f.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);f.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",l).change(function(e){var n=$(this).data("colorPicker").color;a.css("color",(n=="transparent"?"":"#")+n);f.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",l).change(function(e){var n=$(this).data("colorPicker").color;a.css("backgroundColor",(n=="transparent"?"":"#")+n);f.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);f.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);f.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbCheckBox._getFieldSettingsGeneralSection executed.");return[u,l]},_languageChange:function(e,t){t.target._log("fbCheckBox.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbCheckBox.languageChange executed.")}});$.widget("fb.fbCheckBox",FbCheckBox);var formulaField="formulaField";var FbFormulaField=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/streamlined/icons/calculator.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Formula Field</span>',belongsTo:$.fb.formbuilder.prototype.options._advanceFieldsPanel,_type:"FormulaField",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label></div>                 		<div class="fullLengthField mClass"><input type="text" disabled value="Calculated Field" class="textInput" />						<p class="formHint"></p></div></div>',_counterField:"field1",_languages:["en","zh_CN"],settings:{en:{label:"Formula",oldResultType:"",newResultType:"NumberResult",value:[],description:"",classes:[],styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"",oldResultType:"",newResultType:"NumberResult",value:[],description:"",classes:[],styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},isEditable:true,_persistable:true,required:false,hideFromUser:false,fieldSize:"mClass",restriction:"no",styles:{color:"default",backgroundColor:"default",label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();index1==0?index1=n:index1;var r=$(t.target.options._html);t.target._log("fbFormulaField._getWidget executing...");$("label span",r).text(t.settings.label);$(".formHint",r).text(t.settings.description);t.target._log("fbFormulaField._getWidget executed.");return r},_getFieldSettingsLanguageSection:function(e,t){var n=[];t.target._log("fbFormulaField._getFieldSettingsLanguageSection executing...");var r=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",r).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=$('<div><textarea id="field.value" disabled></textarea></div>');var o=function(e){var n=t.settings.value.length;if(e=="<-"){if(!isNaN(t.settings.value[n-1])&&t.settings.value[n-1].length>1){t.settings.value[n-1]=t.settings.value[n-1].substring(0,t.settings.value[n-1].length-1)}else{t.settings.value.splice(n-1,1)}}else{if(n==0){t.settings.value[n]=""+e}else{if(!isNaN(e)&&!isNaN(t.settings.value[n-1])){t.settings.value[n-1]=t.settings.value[n-1]+e}else{t.settings.value[n]=""+e}}}u()};var u=function(){var e="";var n=true;for(var r=0;r<t.settings.value.length;r++){var i=t.settings.value[r];if(!isNaN(i)||i=="+"||i=="+"||i=="-"||i=="*"||i=="/"||i=="("||i==")"){e+=t.settings.value[r]+" "}else{var o=$("#button"+i,a);e+="("+(o.val()==undefined?"Field Deleted":o.val())+") ";if(o.attr("itsType")=="SingleLineDate"){n=!n}}}if(n){t.settings.newResultType="NumberResult"}else{t.settings.newResultType="DateResult"}$("textarea",s).val(e);t.target._updateSettings(t.item)};var a=$('<div style="height:120px;overflow-y:scroll;"></div>');$(".ctrlHolder:not(.deletedCtrlHolder)").each(function(){var e=$(this);var t=e.attr("rel");var n=e.find("input[id$='fields["+t+"].type']").val();if(n=="SingleLineNumber"||n=="SingleLineDate"){var r=e.find("input[id$='fields["+t+"].settings']");var i=e.find("input[id$='fields["+t+"].name']").val();var s=$.parseJSON(unescape(r.val()));var u=$('<input type="button" id="button'+i+'" style="width:100px;overflow:hidden;" itsType="'+n+'">').val(s[$("#language").val()].label).attr({title:s[$("#language").val()].label}).click(function(){o(i)});a.append(u)}});if(a.children().size()==0){a.append($('<input type="button" value="No Fields" title="No Fields of type Number or Date" style="width:105px;">'))}var f=$('<div><table class="formulaCalculator"><tr><td>1</td><td>2</td><td>3</td><td style="white-space:nowrap;"><-</td><td rowspan="5" class="formulaTDForFields" id="formulaTDForFields"></td></tr>										<tr><td>4</td><td>5</td><td>6</td><td>+</td></tr>										<tr><td>7</td><td>8</td><td>9</td><td>-</td></tr>										<tr><td>(</td><td>0</td><td>)</td><td>*</td></tr>										<tr><td class="blankTD"></td><td class="blankTD"> </td><td class="blankTD"> </td><td>/</td></tr>									</table></div>								');$('td[class=""]',f).each(function(){var e=$(this);e.css("cursor","pointer");e.click(function(){o($(this).html())})});$("#formulaTDForFields",f).append(a);u();var l=t.target._fieldset({text:"Formula Value"}).append(t.target._oneColumn(s)).append(t.target._oneColumn(f));var c=t.settings.styles;var h=t.target._getFbLocalizedSettings().styles;var p=c.fontFamily!="default"?c.fontFamily:h.fontFamily;var d=c.fontSize!="default"?c.fontSize:h.fontSize;var v=t.target._fontPanel({fontFamily:p,fontSize:d,fontStyles:c.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",v).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");c.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");c.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",v).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");c.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");c.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",v).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");c.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");c.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",v).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);c.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",v).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");c.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbFormulaField._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(r),t.target._oneColumn(i),t.target._oneColumn(l),v]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbFormulaField._getFieldSettingsGeneralSection executing...");var n=$('<div><input type="checkbox" id="field.isEditable" /> Allow User Edit</div>');var r=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var i=$("<div>Field Size</div>");var s=$('<div><select id="field.size" style="width: 99%"> 				<option value="sClass">Small</option> 				<option value="mClass">Medium</option> 				<option value="lClass">Large</option> 			</select></div>');var o=t.target._fieldset({text:"Value"}).append(t.target._twoColumns(i,s)).append(n).append(r);$(".col1",o).css("width","32%").removeClass("labelOnTop");$(".col2",o).css("marginLeft","34%").removeClass("labelOnTop");$("input",n).attr("checked",t.settings.isEditable).change(function(e){if($(this).attr("checked")){t.settings.isEditable=true}else{t.settings.isEditable=false}t.target._updateSettings(t.item)});$("input",r).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){t.settings.hideFromUser=true}else{t.settings.hideFromUser=false}t.target._updateSettings(t.item)});var u=t.item.find(".textInput");var a=t.settings.styles;if(a.value.color=="default"){a.value.color=u.css("color")}if(a.value.backgroundColor=="default"){a.value.backgroundColor=u.css("backgroundColor")}var f=t.target._labelValueDescriptionColorPanel(a);$("input[id$='field.label.color']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);a.label.color=n;t.target._updateSettings(t.item)});if(!t.settings.fieldSize){t.settings.fieldSize="mClass"}$("select",s).val(t.settings.fieldSize).change(function(e){t.settings.fieldSize=$(this).val();var n=t.item.find("input").parent();if($(n).hasClass("sClass")){$(n).removeClass("sClass")}else if(n.hasClass("mClass")){$(n).removeClass("mClass")}else if(n.hasClass("lClass")){$(n).removeClass("lClass")}$(n).addClass(t.settings.fieldSize);t.target._updateSettings(t.item)}).trigger("change");$("input[id$='field.label.backgroundColor']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);a.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",f).change(function(e){var n=$(this).data("colorPicker").color;u.css("color",(n=="transparent"?"":"#")+n);a.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",f).change(function(e){var n=$(this).data("colorPicker").color;u.css("backgroundColor",(n=="transparent"?"":"#")+n);a.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);a.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);a.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbFormulaField._getFieldSettingsGeneralSection executed.");return[o,f]},_languageChange:function(e,t){t.target._log("fbFormulaField.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbFormulaField.languageChange executed.")}});$.widget("fb.fbFormulaField",FbFormulaField);var fileUploadid="fileUpload";var FbFileUpload=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/fileUpload.png" style="position:absolute;left:-7px;z-index:2;width:16px" > File Upload</span>',belongsTo:$.fb.formbuilder.prototype.options._advanceFieldsPanel,_type:"FileUpload",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><em></em><span></span></label> </div>						<div class="fullLengthField"><input type="file" name="myfileupload" disabled="disabled" class="textInput">		                <p class="formHint"></p></div></div>',_counterField:"field1",_languages:["en","zh_CN"],settings:{en:{label:"File Upload",value:"",description:"",classes:[],styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"",value:"",description:"",classes:[],styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,multipleUpload:true,maxSize:2,unit:"MB",restriction:"no",styles:{color:"default",backgroundColor:"default",label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();index1==0?index1=n:index1;var r=$(t.target.options._html);t.target._log("fbFileUpload._getWidget executing...");$("label span",r).text(t.settings.label);$("input[type=file]",$(r)).each(function(){$(this).attr("id","fileUpload_"+index1)});$(".formHint",r).text(t.settings.description);t.target._log("fbFileUpload._getWidget executed.");return r},_getFieldSettingsLanguageSection:function(e,t){var n=[];t.target._log("fbFileUpload._getFieldSettingsLanguageSection executing...");var r=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<textarea id="field.label" />');$("textarea",r).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbFileUpload._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbFileUpload._getFieldSettingsGeneralSection executing...");var n=$('<div><input type="checkbox" id="field.multipleUpload" /> Allow Multiple Uploads</div>');var r=$('<div>Max Size Per File <input type="text" id="field.maxSize" style="width:70px;"/><select id="field.unit"><option value="KB">KB</option><option value="MB">MB</option></select></div>');$("input",n).attr("checked",t.settings.multipleUpload).change(function(e){if($(this).attr("checked")){t.settings.multipleUpload=true}else{t.settings.multipleUpload=false}t.target._updateSettings(t.item)});$("input",r).val(t.settings.maxSize);$("input",r).change(function(e){var n=isNaN($(this).val())?t.settings.maxSize:Number($(this).val());if(n!=0){t.settings.maxSize=n}else{t.settings.maxSize=2}$(this).val(t.settings.maxSize);t.target._updateSettings(t.item)});$("select",r).val(t.settings.unit);$("select",r).change(function(e){t.settings.unit=$(this).val();t.target._updateSettings(t.item)});var i=t.target._fieldset({text:"Uploads"}).append(r);var s=t.item.find(".textInput");var o=t.settings.styles;if(o.value.color=="default"){o.value.color=s.css("color")}if(o.value.backgroundColor=="default"){o.value.backgroundColor=s.css("backgroundColor")}var u=t.target._labelValueDescriptionColorPanel(o);$("input[id$='field.label.color']",u).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);o.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",u).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);o.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",u).change(function(e){var n=$(this).data("colorPicker").color;s.css("color",(n=="transparent"?"":"#")+n);o.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",u).change(function(e){var n=$(this).data("colorPicker").color;s.css("backgroundColor",(n=="transparent"?"":"#")+n);o.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",u).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);o.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",u).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);o.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbFileUpload._getFieldSettingsGeneralSection executed.");return[i,u]},_languageChange:function(e,t){t.target._log("fbFileUpload.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbFileUpload.languageChange executed.")}});$.widget("fb.fbFileUpload",FbFileUpload);var DatePicker=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/date_input.png" style="position:absolute;left:-7px;z-index:2;width:20px" > Date Input</span>',belongsTo:$.fb.formbuilder.prototype.options._standardFieldsPanel,_type:"DatePicker",_html:'<div><label><span></span></label>	        <input id="datepicker" type="text"></div>               ',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Date",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},_persistable:true,required:false,hideFromUser:false,restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbSingleLineText._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSingleLineText._getWidget executed.");var r=((1+Math.random())*65536|0).toString(16).substring(1);$("#datepicker").attr("id",r);console.log(r);$(function(){$("#"+r).datepicker()});r="";return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbDatePicker._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._log("Update setting of "+t.item+" with value "+n);t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Value",name:"field.value"}).append('<input type="text" id="field.value" />');$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();t.item.find(".textInput").val(n);t.settings.value=n;t.target._updateSettings(t.item)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=$('<div><input type="checkbox" id="field.required" /> Required</div>');var r=$('<div><select id="field.restriction" style="width: 99%"> 				<option value="no">Any character</option> 				<option value="alphanumeric">Alphanumeric only</option> 				<option value="letterswithbasicpunc">Letters or punctuation only</option> 				<option value="lettersonly">Letters only</option> 			</select></div>');var i=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var s=t.target._fieldset({text:"Value"}).append(t.target._twoColumns(n,r)).append(i);$(".col1",s).css("width","32%").removeClass("labelOnTop");$(".col2",s).css("marginLeft","34%").removeClass("labelOnTop");$("input",n).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",i).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",i).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",n).trigger("change");$("input",i).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",n).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",n).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",i).trigger("change");$("select option[value='"+t.settings.restriction+"']",r).attr("selected","true");$("select",r).change(function(e){t.settings.restriction=$(this).val();t.target._log("fb.settings.restriction = "+t.settings.restriction);t.target._updateSettings(t.item)});var o=t.item.find(".textInput");var u=t.settings.styles;if(u.value.color=="default"){u.value.color=o.css("color")}if(u.value.backgroundColor=="default"){u.value.backgroundColor=o.css("backgroundColor")}var a=t.target._labelValueDescriptionColorPanel(u);$("input[id$='field.label.color']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);u.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);u.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",a).change(function(e){var n=$(this).data("colorPicker").color;o.css("color",(n=="transparent"?"":"#")+n);u.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;o.css("backgroundColor",(n=="transparent"?"":"#")+n);u.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);u.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);u.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[s,a]},_languageChange:function(e,t){t.target._log("fbDropDown.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbDropDown.languageChange executed.")}});$.widget("fb.fbDatePicker",DatePicker);var dropDownIndex=0;var FbDropDown=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/dropdown.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Select</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"dropdown",_html:'<div><div Class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label> </div>            	<div class="fullLengthField" ><select>            <option id="oFirstChoice" >First Choice</option>              <option id="oSecondChoice" >Second Choice</option>             <option id="oThirdChoice" >Third Choice</option>            </select>           <p class="formHint"></p></div></div>',_counterField:"label",_choices:["First Choice","Second Choice","Third Choice"],_languages:["en","zh_CN"],settings:{en:{label:"Dropdown Text",value:["First Choice","Second Choice","Third Choice"],description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:["First Choice","Second Choice","Third Choice"],description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,mapMasterForm:"",mapMasterField:"",restriction:"no",fieldSize:"mClass",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){dropDown="dropdown1";var n=FbWidget._getCounter(this);var r=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();dropDownIndex=index1==0?index1=r:index1;r=index1-1;var i=$(t.target.options._html);$("select",i).attr("id","dropdown"+dropDownIndex);t.target._log("fbDropDown._getWidget executing...");$("label span",i).text(t.settings.label);if(t._settings.required){$("label em",i).text("*")}$("input",i).val(t.settings.value);$(".formHint",i).text(t.settings.description);t.target._log("fbDropDown._getWidget executed.");return i},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbdropdown._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<textarea id="field.description"></textarea>');$("textarea",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=$("div > select",$(t.item));var i=r.attr("id");t.target._log("selected dropdown::"+i);var s=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",s).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var o="";var u=0;$("#"+i+" option").each(function(){$(this).attr("id",i+"_"+u);$(this).val(t.settings.value[u]);if(u==0){o=o+'<div id="ws'+$(this).attr("id")+'"> <input type="Text" style="width:180px" value="" id="Cho'+$(this).attr("id")+'" ><a href="#" class="AddChoice" id="ChoAdd'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a></div>'}else{o=o+'<div id="ws'+$(this).attr("id")+'"> <input type="Text" style="width:180px" value="" id="Cho'+$(this).attr("id")+'" ><a href="#" class="AddChoice" id="ChoAdd'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a><a href="#" class="RemoveChoice" id="ChoRem'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/images.png" style="width:20px;"></a></div>'}u=u+1});o="<div>"+o+"</div>";var a=$(o);var f=1;var l=function(){$(this).val(t.settings.value[f-1]).keyup(function(e){var n=$(this).attr("id").replace("Cho","");$("#"+n).val($(this).val());$("#"+n).text($(this).val());var r=new Array;var s=0;$("#"+i+" option").each(function(){r[s]=$(this).val();s++});t.settings.value=r;t.target._updateSettings(t.item)});f=f+1};$("input[type=text]",a).each(l);var c=function(){var e=confirm("Are you sure?");if(e){var n=new Array;var r=$(this).attr("id").replace("ChoRem","");var s=$("#ws"+r);s.remove();$("#"+r).remove();var o=0;$("#"+i+" option").each(function(){n[o]=$(this).val();o++});t.settings.value=n;t.target._updateSettings(t.item)}return false};$('a[class="RemoveChoice"]',a).click(c);var h=function(){var e=new Array;var n=(new Date).getTime();var r=$(this).attr("id").replace("ChoAdd","");$("#ws"+r).after('<div id="ws'+n+'"><input type="Text" style="width:180px" value="Enter your Choice" id="Cho'+n+'"><a href="#" class="AddChoice" id="ChoAdd'+n+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a><a href="#" class="RemoveChoice" id="ChoRem'+n+'"><img src="'+imageSourceDir+'/images/images.png" style="width:20px;"></a></div>');$("#"+r).after('<option id="'+n+'">Enter your Choice</option> ');var s=$("#ws"+n);$('a[class="RemoveChoice"]',s).click(c);$('a[class="AddChoice"]',s).click(h);$("#Cho"+n).keyup(function(e){var n=$(this).attr("id").replace("Cho","");$("#"+n).val($(this).val());$("#"+n).text($(this).val());var r=new Array;var s=0;$("#"+i+" option").each(function(){r[s]=$(this).val();s++});t.settings.value=r;t.target._updateSettings(t.item)});var o=0;$("#"+i+" option").each(function(){e[o]=$(this).val();o++});t.settings.value=e;t.target._updateSettings(t.item);return false};$('a[class="AddChoice"]',a).click(h);var p=t.target._fieldset({text:"Choices"}).append(t.target._oneColumn(a));var d=t.settings.styles;var v=t.target._getFbLocalizedSettings().styles;var m=d.fontFamily!="default"?d.fontFamily:v.fontFamily;var g=d.fontSize!="default"?d.fontSize:v.fontSize;var y=t.target._fontPanel({fontFamily:m,fontSize:g,fontStyles:d.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",y).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");d.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");d.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",y).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");d.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");d.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",y).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");d.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");d.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",y).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);d.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",y).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");d.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbDropDown._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(n),t.target._oneColumn(s),p,y]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbDropDown._getFieldSettingsGeneralSection executing...");var n=$("select[id$='form.masterForms']");var r=n.val();var i=$("<div>Mapped Form</div>");var s=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var o=$("<div>Mapped Field</div>");var u=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var a=$("<div>Field Size</div>");var f=$('<div><select id="field.size" style="width: 99%"> 				<option value="sClass">Small</option> 				<option value="mClass">Medium</option> 				<option value="lClass">Large</option> 			</select></div>');var l=$('<div><input type="checkbox" id="field.required" /> Required</div>');var c=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var h=t.target._fieldset({text:"Value"});if(r!=null){h.append(t.target._twoColumns(i,s)).append(t.target._twoColumns(o,u)).append(t.target._twoColumns(a,f))}h.append(t.target._twoColumns(l,c));$(".col1",h).css("width","32%").removeClass("labelOnTop");$(".col2",h).css("marginLeft","34%").removeClass("labelOnTop");if(r!=null){$("option",n).each(function(){for(var e=0;e<r.length;e++){if($(this).val()==r[e]){$("select",s).append($(this).clone())}}});$("select",u).change(function(){t.settings.mapMasterField=$(this).val();t.target._updateSettings(t.item)});$("select",s).change(function(){var e=$("select",u);$("option",e).remove();e.append($('<option value="">--Please Select--</option>'));if($(this).val()!=""){for(var n=0;n<masterFormData.length;n++){if(masterFormData[n].id==$(this).val()){var r=masterFormData[n].fieldsList;for(var i=0;i<r.length;i++){var s=$("<option></option>");e.append(s);s.text(r[i].label);s.val(r[i].name)}}}e.val(t.settings.mapMasterField)}t.settings.mapMasterForm=$(this).val();t.target._updateSettings(t.item)}).val(t.settings.mapMasterForm);$("select",s).trigger("change")}if(!t.settings.fieldSize){t.settings.fieldSize="mClass"}$("select",f).val(t.settings.fieldSize).change(function(e){t.settings.fieldSize=$(this).val();var n=t.item.find("select").parent();if($(n).hasClass("sClass")){$(n).removeClass("sClass")}else if(n.hasClass("mClass")){$(n).removeClass("mClass")}else if(n.hasClass("lClass")){$(n).removeClass("lClass")}$(n).addClass(t.settings.fieldSize);t.target._updateSettings(t.item)}).trigger("change");$("input",l).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",c).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",c).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",l).trigger("change");$("input",c).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",l).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",l).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",c).trigger("change");var p=t.item.find(".textInput");var d=t.settings.styles;if(d.value.color=="default"){d.value.color=p.css("color")}if(d.value.backgroundColor=="default"){d.value.backgroundColor=p.css("backgroundColor")}var v=t.target._labelValueDescriptionColorPanel(d);$("input[id$='field.label.color']",v).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);d.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",v).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);d.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",v).change(function(e){var n=$(this).data("colorPicker").color;p.css("color",(n=="transparent"?"":"#")+n);d.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",v).change(function(e){var n=$(this).data("colorPicker").color;p.css("backgroundColor",(n=="transparent"?"":"#")+n);d.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",v).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);d.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",v).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);d.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbDropDown._getFieldSettingsGeneralSection executed.");return[h,v]},_languageChange:function(e,t){t.target._log("fbDropDown.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbDropDown.languageChange executed.")}});$.widget("fb.fbdropdown",FbDropDown);var radioId="checkbox";var fbGroupButton=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/radio.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Radio Button</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"GroupButton",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label><p style="line-height:5px;"> </p></div>         		<div class="fullLengthField"> <div id="FirstChoicerd"><input type="radio" value="First Radio" name="myGroup" id="FirstChoicert"><span id="FirstChoicesr" style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;">First Radio </span><br/></div> 				<div id="SecondChoicerd"><input type="radio" value="Second Radio" name="myGroup" id="SecondChoicert"><span id="SecondChoicesr" style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;">Second Radio</span><br/></div>				<div id="ThirdChoicerd"><input type="radio" value="Third Radio" name="myGroup" id="ThirdChoicert"><span id="ThirdChoicesr" style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;">Third Radio </span><br/></div>        	    <div style="display:none;"><input type="text" name="mycheckbox" placeholder="Other" style="width:auto;"/></div>         		<p class="formHint" style="color: #777777; background-color: #transparent;"></p></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Radio Button",value:["First Radio","Second Radio","Third Radio"],description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:["First Radio","Second Radio","Third Radio"],description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,fieldLayout:"oneCol",otherOption:false,restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();var r=index1==0?index1=n:index1;n=index1-1;var i=$(t.target.options._html);$("#GrpBtnPanel",i).attr("id","GrpBtnPanel"+r);var s=1;$("input",i).each(function(){$(this).attr("id","radio"+r+"_"+s);$(this).val(t.settings.value[s-1]);s=s+1});t.target._log("fbGroupButton._getWidget executing...");$("label span",i).text(t.settings.label);if(t._settings.required){$("label em",i).text("*")}$(".formHint",i).text(t.settings.description);t.target._log("fbGroupButton._getWidget executed.");return i},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbGroupButton._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<textarea id="field.label" />');$("textarea",n).val(t.item.find("label span").text()).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",r).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var i=1;var s="<div >";$("input[type=radio]",t.item).each(function(){$(this).val(t.settings.value[i-1]);if(i==1){s=s+'<div id="ws'+$(this).attr("id")+'"><input style="width:180px" type="text" id="txt'+$(this).attr("id")+'" /><a href="#" class="AddChoice" id="ChoAdd'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a></div>'}else{s=s+'<div id="ws'+$(this).attr("id")+'"><input style="width:180px" type="text" id="txt'+$(this).attr("id")+'" /><a href="#" class="AddChoice" id="ChoAdd'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a><a href="#" class="RemoveChoice" id="ChoRem'+$(this).attr("id")+'"><img src="'+imageSourceDir+'/images/images.png" style="width:20px;"></a></div>'}i=i+1});s=s+"</div>";var o=$(s);var u=t.target._fieldset({text:"Choices"}).append(t.target._oneColumn(o));var i=1;$("input[type=text]",o).each(function(){$(this).val(t.settings.value[i-1]).keyup(function(e){var n=$(this).attr("id").replace("txt","");$("#"+n).val($(this).val());$("span",$("#"+n).parent()).text($(this).val());var r=new Array;var i=0;$("input[type=radio]",t.item).each(function(){r[i]=$(this).val();i++});t.settings.value=r;t.target._updateSettings(t.item)});i=i+1});var a=function(){var e=confirm("Are you sure?");if(e){var n=new Array;var r=$(this).attr("id").replace("ChoRem","");var i=$("#ws"+r);i.remove();$("#"+r).parent().remove();var s=0;$("input[type=radio]",t.item).each(function(){n[s]=$(this).val();s++});t.settings.value=n;t.target._updateSettings(t.item)}return false};$('a[class="RemoveChoice"]',o).click(a);var f=function(){var e=new Array;var n=(new Date).getTime();var r=$(this).attr("id").replace("ChoAdd","");$("#ws"+r).after('<div id="ws'+n+'"><input type="Text" style="width:180px" value="New radio" id="txt'+n+'"><a href="#" class="AddChoice" id="ChoAdd'+n+'"><img src="'+imageSourceDir+'/images/add.png" style="width:20px;"></a><a href="#" class="RemoveChoice" id="ChoRem'+n+'"><img src="'+imageSourceDir+'/images/images.png" style="width:20px;"></a></div>');$("#"+r).parent().after('<div><input type="radio" name="myradio" value="New radio" id="'+n+'" ><span style="display: block; margin: -17px 0px 0px 23px; line-height: 16px;">New radio</span><br></div>');var i=$("#ws"+n);$('a[class="RemoveChoice"]',i).click(a);$('a[class="AddChoice"]',i).click(f);$("#txt"+n).keyup(function(e){var n=$(this).attr("id").replace("txt","");$("#"+n).val($(this).val());$("span",$("#"+n).parent()).text($(this).val());var r=new Array;var i=0;$("input[type=radio]",t.item).each(function(){r[i]=$(this).val();i++});t.settings.value=r;t.target._updateSettings(t.item)});var s=0;$("input[type=radio]",t.item).each(function(){e[s]=$(this).val();s++});t.settings.value=e;t.target._updateSettings(t.item);return false};$('a[class="AddChoice"]',o).click(f);var u=t.target._fieldset({text:"Choices"}).append(t.target._oneColumn(o));var l=t.settings.styles;var c=t.target._getFbLocalizedSettings().styles;var h=l.fontFamily!="default"?l.fontFamily:c.fontFamily;var p=l.fontSize!="default"?l.fontSize:c.fontSize;var d=t.target._fontPanel({fontFamily:h,fontSize:p,fontStyles:l.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",d).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");l.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");l.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",d).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");l.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");l.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",d).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");l.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");l.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",d).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);l.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",d).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");l.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(n),t.target._oneColumn(r),u,d]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=$("<div>Field Layout</div>");var r=$('<div><select id="field.layout" style="width: 99%"> 				<option value="oneCol">One Column</option> 				<option value="twoCol">Two Column</option> 				<option value="threeCol">Three Column</option>         		<option value="sbs">Side by Side</option> 			</select></div>');var i=$('<div><input type="checkbox" id="field.required" /> Required</div>');var s=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var o=$('<div><input type="checkbox" id="field.showOther" /> Show Other Option</div>');var u=t.target._fieldset({text:"Value"}).append(t.target._twoColumns(n,r)).append(t.target._twoColumns(i,s)).append(o);$(".col1",u).css("width","32%").removeClass("labelOnTop");$(".col2",u).css("marginLeft","34%").removeClass("labelOnTop");$("input",o).attr("checked",t.settings.otherOption?t.settings.otherOption:false).change(function(e){if($(this).attr("checked")){var n=t.item.find("input[type=text]").parent();n.show();t.settings.otherOption=true}else{var n=t.item.find("input[type=text]").parent();n.hide();t.settings.otherOption=false}t.target._updateSettings(t.item)});$("input",o).trigger("change");if(!t.settings.fieldLayout){t.settings.fieldLayout="oneCol"}$("select",r).val(t.settings.fieldLayout).change(function(e){t.settings.fieldLayout=$(this).val();var n=t.item.find(".formHint").parent();if($(n).hasClass("oneCol")){$(n).removeClass("oneCol")}else if(n.hasClass("twoCol")){$(n).removeClass("twoCol")}else if(n.hasClass("threeCol")){$(n).removeClass("threeCol")}else if(n.hasClass("sbs")){$(n).removeClass("sbs")}$(n).addClass(t.settings.fieldLayout);t.target._updateSettings(t.item)}).trigger("change");$("input",i).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",s).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",s).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",i).trigger("change");$("input",s).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",i).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",i).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",s).trigger("change");var a=t.item.find(".textInput");var f=t.settings.styles;if(f.value.color=="default"){f.value.color=a.css("color")}if(f.value.backgroundColor=="default"){f.value.backgroundColor=a.css("backgroundColor")}var l=t.target._labelValueDescriptionColorPanel(f);$("input[id$='field.label.color']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);f.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);f.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",l).change(function(e){var n=$(this).data("colorPicker").color;a.css("color",(n=="transparent"?"":"#")+n);f.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",l).change(function(e){var n=$(this).data("colorPicker").color;a.css("backgroundColor",(n=="transparent"?"":"#")+n);f.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);f.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",l).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);f.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[u,l]},_languageChange:function(e,t){t.target._log("fbDropDown.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbDropDown.languageChange executed.")}});$.widget("fb.fbGroupButton",fbGroupButton);var LinkVideo=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/lightning_input.png" style="position:absolute;left:-7px;z-index:2;width:20px" > Embed HTML</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"LinkVideo",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span></label></div> 		       <div class="fullLengthField"><div id="videoId" class="linkVideo"><object width="425" height="350" >    <param name="movie" value="" id="video" />  <param name="wmode" value="transparent" />    <embed src=""           type="application/x-shockwave-flash"            width="200" height="200" id="vId"/> </object></div></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Embed HTML",height:200,width:200,value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",height:200,width:200,description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},required:false,hideFromUser:false,_persistable:true,styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=((1+Math.random())*65536|0).toString(16).substring(1);var r=$(t.target.options._html);t.target._log("fbSingleLineText._getWidget executing...");$("label span",r).text(t.settings.label);if(t._settings.required){$("label em",r).text("*")}$("input",r).val(t.settings.value);$(".formHint",r).text(t.settings.description);return r},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=$('<div><input type="text" id="field.value" /></div>');$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();if(n.indexOf("watch?v=")>0){n=n.replace("watch?v=","v/")}$(".ctrlHolderSelected .linkVideo").html('<object width="'+t.settings.width+'" height="'+t.settings.height+'" ><param name="movie" value="" id="video" /><param name="wmode" value="transparent" /><embed src="'+n+'" type="application/x-shockwave-flash" width="200" height="200" id="vId"/></object>');t.settings.value=n;t.target._updateSettings(t.item)});var i=$('<div>                 height : <input type="text">  					</div>');var s=$('<div>                 width : <input type="text">  					</div>');var o=t.target._fieldset({text:"Choices"}).append(t.target._twoColumns(i,s));var u=$('<div><input type="radio" name="urlOrEmbedHtml" style="width:auto;margin:0 4px 4px 0"> Embed URL</div>');var a=$('<div><input type="radio" name="urlOrEmbedHtml" style="width:auto;margin:0 4px 4px 0"> Embed HTML</div>');var f=$('<div><textarea rows="12" /></div>');var l=t.target._fieldset({text:"Embed HTML"}).append(t.target._twoColumns(u,a)).append(t.target._oneColumn(r)).append(t.target._oneColumn(f));$("textarea",f).keyup(function(){t.settings.embedHTML=$(this).val();$(".ctrlHolderSelected .linkVideo").html(t.settings.embedHTML);t.target._updateSettings(t.item)}).val(t.settings.embedHTML);var c=function(){if($("input",u).attr("checked")){f.hide();$("input",r.show()).trigger("keyup");o.show();t.settings.urlOrEmbed=false}if($("input",a).attr("checked")){$("textarea",f.show()).trigger("keyup");r.hide();o.hide();t.settings.urlOrEmbed=true}t.target._updateSettings(t.item)};$("input",u).change(function(){c()});$("input",a).change(function(){c()});t.settings.urlOrEmbed=true;t.target._updateSettings(t.item);u.hide();a.hide();r.hide();if(t.settings.urlOrEmbed){$("input",a).attr("checked",true).trigger("change")}else{$("input",u).attr("checked",true).trigger("change")}$("input",i).val(t.settings.height);$("input",i).keyup(function(e){var n=$(this).val();if(n!=""){n=n.replace(/([^0-9]*)/g,"")}if(t.settings.urlOrEmbed){}else{$(".ctrlHolderSelected embed").height(n*1)}$(this).val(n);t.settings.height=n;t.target._updateSettings(t.item)}).blur(function(e){$(this).trigger("keyup")});$("input",s).val(t.settings.width);$("input",s).keyup(function(e){var n=$(this).val();if(t.settings.urlOrEmbed){}else{$(".ctrlHolderSelected embed").height(heightValue*1);if(n!=""){n=n.replace(/([^0-9]*)/g,"");var r=$(".ctrlHolderSelected embed").parent().parent().parent().innerWidth();n=n>r?r-16:n}else{$(".ctrlHolderSelected embed").width("");$(".ctrlHolderSelected embed").removeAttr("width");$(".ctrlHolderSelected embed").height("");$(".ctrlHolderSelected embed").removeAttr("height");$(".ctrlHolderSelected embed").hide();var r=$(".ctrlHolderSelected embed").parent().parent().parent().innerWidth();var i=$(".ctrlHolderSelected embed").innerWidth();n=i>r?r:i;$(".ctrlHolderSelected embed").show()}$(".ctrlHolderSelected embed").width(n*1)}$(this).val(n);t.settings.width=n;t.target._updateSettings(t.item)}).blur(function(e){$(this).trigger("keyup")});var h=t.settings.styles;var p=t.target._getFbLocalizedSettings().styles;var d=h.fontFamily!="default"?h.fontFamily:p.fontFamily;var v=h.fontSize!="default"?h.fontSize:p.fontSize;var m=t.target._fontPanel({fontFamily:d,fontSize:v,fontStyles:h.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",m).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");h.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");h.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",m).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");h.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");h.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",m).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");h.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");h.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",m).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);h.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",m).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");h.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(n),l,o,m]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=t.item.find(".textInput");var r=t.settings.styles;if(r.value.color=="default"){r.value.color=n.css("color")}if(r.value.backgroundColor=="default"){r.value.backgroundColor=n.css("backgroundColor")}var i=t.target._labelValueDescriptionColorPanel(r);$("input[id$='field.label.color']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);r.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);r.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",i).change(function(e){var i=$(this).data("colorPicker").color;n.css("color",(i=="transparent"?"":"#")+i);r.value.color=i;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",i).change(function(e){var i=$(this).data("colorPicker").color;n.css("backgroundColor",(i=="transparent"?"":"#")+i);r.value.backgroundColor=i;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);r.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);r.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[i]},_languageChange:function(e,t){t.target._log("fbSingleLineText.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbSingleLineText.languageChange executed.")}});$.widget("fb.fbLinkVideo",LinkVideo);var FbMultiLineText=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/textarea.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Multi Line Text</span>',belongsTo:$.fb.formbuilder.prototype.options._standardFieldsPanel,_type:"MultiLineText",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label></div>         	<div class="fullLengthField"> <textarea class="textInput" /> 	        <p class="formHint"></p></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Multi Line Text",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,mapMasterForm:"",mapMasterField:"",minRange:"0",maxRange:"",restriction:"no",fieldSize:"2",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbMultiLineText._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbMultiLineText._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbMultiLineText._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Value",name:"field.value"}).append('<input type="text" id="field.value" />');t.item.find(".textInput").val(t.settings.value);$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();t.item.find(".textInput").val(n);t.settings.value=n;t.target._updateSettings(t.item)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbMultiLineText._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbMultiLineText._getFieldSettingsGeneralSection executing...");var n=$("select[id$='form.masterForms']");var r=n.val();var i=$("<div>Mapped Form</div>");var s=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var o=$("<div>Mapped Field</div>");var u=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var a=$('<div><input type="checkbox" id="field.required" /> Required</div>');var f=$('<div><select id="field.restriction" style="width: 99%"> 				<option value="no">Any character</option> 				<option value="alphanumeric">Alphanumeric only</option> 				<option value="letterswithbasicpunc">Letters or punctuation only</option> 				<option value="lettersonly">Letters only</option> 			</select></div>');var l=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var c=$("<div>Range in characters</div>");var h=$("<div>Minimum</div>");var p=$("<div>Maximum</div>");var d=$('<div><input type="text" id="field.minRange" style="width:70px;" value="0" maxlength="7"/></div>');var v=$('<div><input type="text" id="field.maxRange" style="width:70px;" value="" maxlength="7"/></div>');var m=$("<div>Field Size</div>");var g=$('<div><select id="field.fieldSize"  style="width: 99%"> 				<option value="1">Small</option> 				<option value="2">Medium</option> 				<option value="4">Large</option> 			</select></div>');var y=t.target._fieldset({text:"Value"});if(r!=null){y.append(t.target._oneColumn(c)).append(t.target._twoColumns(h,d)).append(t.target._twoColumns(p,v)).append(t.target._twoColumns(i,s)).append(t.target._twoColumns(o,u)).append(t.target._twoColumns(m,g))}y.append(t.target._twoColumns(a,f)).append(l);$(".col1",y).css("width","32%").removeClass("labelOnTop");$(".col2",y).css("marginLeft","34%").removeClass("labelOnTop");if(r!=null){$("option",n).each(function(){for(var e=0;e<r.length;e++){if($(this).val()==r[e]){$("select",s).append($(this).clone())}}});$("select",u).change(function(){t.settings.mapMasterField=$(this).val();t.target._updateSettings(t.item)});$("select",s).change(function(){var e=$("select",u);$("option",e).remove();e.append($('<option value="">--Please Select--</option>'));if($(this).val()!=""){for(var n=0;n<masterFormData.length;n++){if(masterFormData[n].id==$(this).val()){var r=masterFormData[n].fieldsList;for(var i=0;i<r.length;i++){var s=$("<option></option>");e.append(s);s.text(r[i].label);s.val(r[i].name)}}}e.val(t.settings.mapMasterField)}t.settings.mapMasterForm=$(this).val();t.target._updateSettings(t.item)}).val(t.settings.mapMasterForm);$("select",s).trigger("change")}$("select",g).change(function(){var e=$(this).val();t.item.find("textArea").height(e*1*65+"px");t.settings.fieldSize=e;t.target._updateSettings(t.item)}).val(t.settings.fieldSize);$("input",a).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",l).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",l).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",a).trigger("change");$("input",l).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",a).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",a).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",l).trigger("change");$("select option[value='"+t.settings.restriction+"']",f).attr("selected","true");$("select",f).change(function(e){t.settings.restriction=$(this).val();t.target._log("fb.settings.restriction = "+t.settings.restriction);t.target._updateSettings(t.item)});if(!t.settings.minRange){t.settings.minRange=0}$("input[id$='field.minRange']",d).val(t.settings.minRange).keyup(function(e){var n=$(this).val();var r=n;if(n!=""){r=r.replace(/([^0-9]*)/g,"");if(r>2147483647)r=2147483647;$(this).val(r)}t.settings.minRange=r;t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.maxRange){t.settings.maxRange=0}$("input[id$='field.maxRange']",v).val(t.settings.maxRange).keyup(function(e){var n=$(this).val();var r=n;if(n!=""){r=r.replace(/([^0-9]*)/g,"");if(r>2147483647)r=2147483647;$(this).val(r)}t.settings.maxRange=r;t.target._updateSettings(t.item)}).trigger("change");var b=t.item.find(".textInput");var w=t.settings.styles;if(w.value.color=="default"){w.value.color=b.css("color")}if(w.value.backgroundColor=="default"){w.value.backgroundColor=b.css("backgroundColor")}var E=t.target._labelValueDescriptionColorPanel(w);$("input[id$='field.label.color']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);w.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);w.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",E).change(function(e){var n=$(this).data("colorPicker").color;b.css("color",(n=="transparent"?"":"#")+n);w.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",E).change(function(e){var n=$(this).data("colorPicker").color;b.css("backgroundColor",(n=="transparent"?"":"#")+n);w.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);w.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);w.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbMultiLineText._getFieldSettingsGeneralSection executed.");return[y,E]},_languageChange:function(e,t){t.target._log("fbMultiLineText.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbMultiLineText.languageChange executed.")}});$.widget("fb.fbMultiLineText",FbMultiLineText);var FbPlainText=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/label.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Rich Text</span>',belongsTo:$.fb.formbuilder.prototype.options._standardFieldsPanel,_type:"PlainText",_html:'<div class="PlainText"></div><span style="display:none;"/> ',_counterField:"text",_languages:["en","zh_CN"],settings:{en:{text:"Rich Text",classes:["leftAlign","middleAlign"],styles:{fontFamily:"",fontSize:"default",fontStyles:[0,0,0]}},zh_CN:{text:"?????",classes:["rightAlign","middleAlign"],styles:{fontFamily:"",fontSize:"default",fontStyles:[0,0,0]}},_persistable:true,styles:{color:"000000",backgroundColor:"default"}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){t.item.addClass(t.settings.classes[1]);return $(t.target.options._html).text(t.settings.text).addClass(t.settings.classes[0])},_getFieldSettingsLanguageSection:function(e,t){var n=t.target._label({label:"Text",name:"field.text",description:"Text entered below will display in the form."}).append('<textarea id="field.text" cols="44" rows="15"></textarea> <input style="width: 50px" class="button button-green" type="button" value="Save"/>');$("label",n).css("padding-bottom","0");$("textarea",n).val(t.settings.text).keyup(function(e){var n=$(this).val();t.item.find("div.PlainText").html(n);t.settings.text=n;t.target._updateSettings(t.item);return true});$("input",n).click(function(e){$('textarea[id$="field.text"]').trigger("keyup")});return[t.target._oneColumn(n)]},_getFieldSettingsGeneralSection:function(e,t){var n=t.item.find(".textInput");var r=t.settings.styles;var i=t.target._labelColorPanel(r);$("input[id$='field.color']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);var i=t.item.find("h1");if(i){i.css("color",(n=="transparent"?"":"#")+n+"!important")}var s=t.item.find("h2");if(s){s.css("color",(n=="transparent"?"":"#")+n+"!important")}var o=t.item.find("h3");if(o){o.css("color",(n=="transparent"?"":"#")+n+"!important")}var u=t.item.find("h4");if(u){u.css("color",(n=="transparent"?"":"#")+n+"!important")}var a=t.item.find("h5");if(a){a.css("color",(n=="transparent"?"":"#")+n+"!important")}var f=t.item.find("h6");if(f){f.css("color",(n=="transparent"?"":"#")+n+"!important")}var l=t.item.find("p");if(l){l.css("color",(n=="transparent"?"":"#")+n+"!important")}r.color=n;t.target._updateSettings(t.item)});$("input[id$='field.backgroundColor']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);r.backgroundColor=n;t.target._updateSettings(t.item)});return[i]},_languageChange:function(e,t){this._log("languageChange = "+$.toJSON(t.settings));var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;t.item.find(".PlainText").text(t.settings.text).removeClass("leftAlign centerAlign rightAlign").addClass(t.settings.classes[0]);t.item.css("fontWeight",n.fontStyles[0]==1?"bold":"normal").css("fontStyle",n.fontStyles[1]==1?"italic":"normal").css("textDecoration",n.fontStyles[2]==1?"underline":"none").css("fontFamily",i).css("fontSize",s+"px").removeClass("topAlign middleAlign bottomAlign").addClass(t.settings.classes[1])}});$.widget("fb.fbPlainText",FbPlainText);var hrefid="link";var FbPlainTextHref=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/hyperlink.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Hyperlink</span>',belongsTo:$.fb.formbuilder.prototype.options._standardFieldsPanel,_type:"PlainTextHref",_html:'<div><a href="#" id="link" onclick="return false;">          <label style="font-weight:bold;"><span>Your HyperLink</span><p class="formHint"></p></label></a></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"link",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){hrefid="link"+t.item.attr("rel");var n=$(t.target.options._html);t.target._log("fbSingleLineText._getWidget executing...");$("label span",n).text(t.settings.label);$("a",n).attr("id",hrefid);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSingleLineText._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"URL (No http://)",name:"field.value"}).append('<input type="text" id="field.value" />');$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();hrefid="link"+t.item.attr("rel");$("#"+hrefid).attr("href",n);t.settings.value=n;t.target._updateSettings(t.item)}).blur(function(){var e=$(this).val();while(e.indexOf("http://")!=-1){e=e.replace("http://","")}while(e.indexOf("https://")!=-1){e=e.replace("https://","")}hrefid="link"+t.item.attr("rel");$("#"+hrefid).attr("href",e);$(this).val(e);t.settings.value=e;t.target._updateSettings(t.item)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n).css("font-weight","normal");t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=t.item.find(".textInput");var r=t.settings.styles;if(r.value.color=="default"){r.value.color=n.css("color")}if(r.value.backgroundColor=="default"){r.value.backgroundColor=n.css("backgroundColor")}var i=t.target._labelValueDescriptionColorPanel(r);$("input[id$='field.label.color']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);r.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);r.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",i).change(function(e){var i=$(this).data("colorPicker").color;n.css("color",(i=="transparent"?"":"#")+i);r.value.color=i;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",i).change(function(e){var i=$(this).data("colorPicker").color;n.css("backgroundColor",(i=="transparent"?"":"#")+i);r.value.backgroundColor=i;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);r.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);r.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[i]},_languageChange:function(e,t){t.target._log("fbSingleLineText.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbSingleLineText.languageChange executed.")}});$.widget("fb.fbPlainTextHref",FbPlainTextHref);var FbScaleRating=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/star.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Scale Rating</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"ScaleRating",_html:'<div> 					<div>						<div>							<div class="fullLengthLabel">								<label style="font-weight:bold;"> <span>Scale Rating 1</span><em></em> 								</label>							</div>        					<div class="fullLengthField">					        	<table class="scaleRateTable" style="margin:0;">						        	<thead>						        		<tr>						        			<th style="text-align:center;padding:5px;width: 32%;">						        				Very Satisfied						        			</th>        									<th style="text-align:center;padding:5px;">						        				Satisfied						        			</th>											<th style="text-align:center;padding:5px;">        										Neutral						        			</th>        									<th style="text-align:center;padding:5px;">        										Dissatisfied						        			</th>						        		</tr>						        	</thead>						        	<tr>						        		<td style="text-align:center;font-weight:bold;">						        			<input type="radio" value="VerySatisfied" name="scaleRating"><br>1						        		</td>						        		<td style="text-align:center;font-weight:bold;">						        			<input type="radio" value="Satisfied" name="scaleRating"><br>2						        		</td>						        		<td style="text-align:center;font-weight:bold;">						        			<input type="radio" value="Neutral" name="scaleRating"><br>3						        		</td>						        		<td style="text-align:center;font-weight:bold;">						        			<input type="radio" value="NotSatisfied" name="scaleRating"><br>4						        		</td>						        	</tr>						        </table>        						<div class="slider" style="display:none;"></div>        					</div>						</div>					</div>         			<p class="formHint" style="color: #777777; background-color: #transparent; "></p>		      </div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Scale Rating",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,moodRate:false,restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbSingleLineText._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSingleLineText._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbdropdown._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<textarea id="field.description"></textarea>');$("textarea",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.settings.value=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",r).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var i=t.settings.styles;var s=t.target._getFbLocalizedSettings().styles;var o=i.fontFamily!="default"?i.fontFamily:s.fontFamily;var u=i.fontSize!="default"?i.fontSize:s.fontSize;var a=t.target._fontPanel({fontFamily:o,fontSize:u,fontStyles:i.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",a).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");i.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");i.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",a).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");i.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");i.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",a).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");i.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");i.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",a).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);i.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",a).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");i.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(n),t.target._oneColumn(r),a]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=$('<div><input type="checkbox" id="field.required" /> Required</div>');var r=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var i=$('<div><label for="field.moodRate">Rating Type </label> <select id="field.moodRate"><option value="false">Scale Rating</option><option value="true">Mood Rating</option></select></div>');var s=t.target._fieldset({text:"Value"}).append(t.target._twoColumns(n,r)).append(i);$(".col1",s).css("width","32%").removeClass("labelOnTop");$(".col2",s).css("marginLeft","34%").removeClass("labelOnTop");var o=t.item.find(".slider");if(o.children().length==0){o.slider({value:75,min:25,max:100,slide:function(e,t){$("a",o).attr("style","background-image: url("+imageSourceDir+"/images/face-"+Math.round(t.value/25).toFixed(0)+".png) !important;")}})}$("input",n).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",r).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",r).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",n).trigger("change");$("input",r).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",n).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",n).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",r).trigger("change");$("select",i).val(""+t.settings.moodRate).change(function(e){if($(this).val()=="true"){t.settings.moodRate=true;t.item.find(".scaleRateTable").hide();t.item.find(".slider").show()}else{t.settings.moodRate=false;t.item.find(".scaleRateTable").show();t.item.find(".slider").hide()}t.target._updateSettings(t.item)});var u=t.item.find(".textInput");var a=t.settings.styles;if(a.value.color=="default"){a.value.color=u.css("color")}if(a.value.backgroundColor=="default"){a.value.backgroundColor=u.css("backgroundColor")}var f=t.target._labelValueDescriptionColorPanel(a);$("input[id$='field.label.color']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);a.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);a.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",f).change(function(e){var n=$(this).data("colorPicker").color;u.css("color",(n=="transparent"?"":"#")+n);a.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",f).change(function(e){var n=$(this).data("colorPicker").color;u.css("backgroundColor",(n=="transparent"?"":"#")+n);a.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);a.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",f).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);a.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[s,f]},_languageChange:function(e,t){t.target._log("fbDropDown.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbDropDown.languageChange executed.")}});$.widget("fb.fbScaleRating",FbScaleRating);var FbLikert=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/application_view_detail.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Likert</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"Likert",_html:'<div> 					<label style="font-weight:bold;"> <span>Likert 1</span><em></em> 					</label>		        	<table class="lTable">        				<thead><tr><td> </td><td>Very Satisfied</td><td>Satisfied</td><td>Neutral</td><td>Dissatisfied</td></thead>        				<tbody>        					<tr><td>Usability</td>     <td><input name="likert[0]" type="radio"></td><td><input name="likert[0]" type="radio"></td><td><input name="likert[0]" type="radio"></td><td><input name="likert[0]" type="radio"></td></tr>							<tr><td>Interface Look</td><td><input name="likert[1]" type="radio"></td><td><input name="likert[1]" type="radio"></td><td><input name="likert[1]" type="radio"></td><td><input name="likert[1]" type="radio"></td></tr>							<tr><td>Colors</td>        <td><input name="likert[2]" type="radio"></td><td><input name="likert[2]" type="radio"></td><td><input name="likert[2]" type="radio"></td><td><input name="likert[2]" type="radio"></td></tr>							<tr><td>Clarity</td>       <td><input name="likert[3]" type="radio"></td><td><input name="likert[3]" type="radio"></td><td><input name="likert[3]" type="radio"></td><td><input name="likert[3]" type="radio"></td></tr>        				</tbody>			        </table>        			<p style="color: #777777; background-color: #transparent;" class="formHint"></p>		      </div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Likert",value:"",description:"",rows:["Usability","Interface Look","Colors","Clarity"],columns:["Very Satisfied","Satisfied","Neutral","Dissatisfied"],switchRowCol:false,styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,moodRate:false,restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbSingleLineText._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSingleLineText._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbdropdown._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<textarea id="field.description"></textarea>');$("textarea",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.settings.value=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",r).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var i=t.target._twoColumns($('<div><input type="checkbox" id="field.switchRowCol"/></div>'),$("<div>One Click Per Column</div>"));$(".col1",i).css("width","10%").removeClass("labelOnTop").css("padding","5px 0");$(".col2",i).css("marginLeft","10%").removeClass("labelOnTop").css("padding","8px 0");$("input",i).attr("checked",t.settings.switchRowCol?true:false).change(function(e){t.settings.switchRowCol=this.checked;t.target._updateSettings(t.item);s();a()});var s=function(){var e=t.settings.switchRowCol?true:false;var n=t.item.find("table.lTable");var r=$("tbody",n).remove();var i=$("thead",n).remove();var s=$("<thead><tr></tr></thead>");r=$("<tbody></tbody>");n.append(s);n.append(r);i=$("tr",s);i.append($("<td></td>"));var o=[];var u=t.settings.columns;var a=t.settings.rows;var f=e?a:u;var l=e?u:a;if(f.length>0){for(var c=0;c<f.length;c++){i.append($("<td></td>").text(f[c]))}}else{i.append($("<td></td>"))}if(l.length>0){for(var c=0;c<l.length;c++){var h=$("<tr></tr>").append($("<td></td>").text(l[c]));r.append(h);if(f.length>0){for(var p=0;p<f.length;p++){h.append($('<td><input name="likert['+(e?p:c)+']" type="radio"></td>'))}}else{h.append($('<td><input name="likert['+(e?p:c)+']" type="radio"></td>'))}}}else{r.append($('<tr><td></td><td><input type="radio"></td></tr>'))}};var o=t.target._fieldset({text:"Columns","class":"innerFieldset"}).append('<textarea id="field.columns" rows="5" style="width:93%;height:auto;"></textarea>');var u=t.target._fieldset({text:"Rows","class":"innerFieldset"}).append('<textarea id="field.rows" rows="5" style="width:93%;height:auto;"></textarea>');$("textarea",o).val(t.settings.columns.join("\n"));$("textarea",u).val(t.settings.rows.join("\n"));$("textarea",o).keyup(function(){var e=$("textarea",o).val().split("\n");t.settings.columns=e;s();t.target._updateSettings(t.item)});$("textarea",u).keyup(function(){var e=$("textarea",u).val().split("\n");t.settings.rows=e;s();t.target._updateSettings(t.item)});var a=function(){var e=t.settings.switchRowCol?true:false;$("legend",o).text(e?"Rows":"Columns");$("legend",u).text(e?"Columns":"Rows")};a();var f=t.settings.styles;var l=t.target._getFbLocalizedSettings().styles;var c=f.fontFamily!="default"?f.fontFamily:l.fontFamily;var h=f.fontSize!="default"?f.fontSize:l.fontSize;var p=t.target._fontPanel({fontFamily:c,fontSize:h,fontStyles:f.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",p).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");f.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");f.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",p).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");f.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");f.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",p).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");f.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");f.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",p).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);f.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",p).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");f.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(n),t.target._oneColumn(r),i,o,u,p]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=$('<div><input type="checkbox" id="field.required" /> Required</div>');var r=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var i=t.target._fieldset({text:"Value"}).append(t.target._twoColumns(n,r));$(".col1",i).css("width","32%").removeClass("labelOnTop");$(".col2",i).css("marginLeft","34%").removeClass("labelOnTop");var s=t.item.find(".slider");if(s.children().length==0){s.slider({value:75,min:25,max:100,slide:function(e,t){$("a",s).attr("style","background-image: url("+imageSourceDir+"/images/face-"+Math.round(t.value/25).toFixed(0)+".png) !important;")}})}$("input",n).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",r).attr("disabled","disabled");t.item.find("em").text("*");t.settings.required=true}else{$("input",r).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",n).trigger("change");$("input",r).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",n).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",n).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",r).trigger("change");var o=t.item.find(".textInput");var u=t.settings.styles;if(u.value.color=="default"){u.value.color=o.css("color")}if(u.value.backgroundColor=="default"){u.value.backgroundColor=o.css("backgroundColor")}var a=t.target._labelValueDescriptionColorPanel(u);$("input[id$='field.label.color']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);u.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);u.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",a).change(function(e){var n=$(this).data("colorPicker").color;o.css("color",(n=="transparent"?"":"#")+n);u.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;o.css("backgroundColor",(n=="transparent"?"":"#")+n);u.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);u.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);u.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[i,a]},_languageChange:function(e,t){t.target._log("fbDropDown.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbDropDown.languageChange executed.")}});$.widget("fb.fbLikert",FbLikert);var FbSingleLineText=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/textfield.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Single Line Text</span>',belongsTo:$.fb.formbuilder.prototype.options._standardFieldsPanel,_type:"SingleLineText",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label></div>         		<div class="fullLengthField"><input type="text" class="textInput" /> 	        <p class="formHint"></p></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Single Line Text",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,mapMasterForm:"",fieldSize:"mClass",minRange:"0",maxRange:"",mapMasterField:"",restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbSingleLineText._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSingleLineText._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Value",name:"field.value"}).append('<input type="text" id="field.value" />');t.item.find(".textInput").val(t.settings.value);$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();t.item.find(".textInput").val(n);t.settings.value=n;t.target._updateSettings(t.item)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=$("select[id$='form.masterForms']");var r=n.val();var i=$("<div>Mapped Form</div>");var s=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var o=$("<div>Mapped Field</div>");var u=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var a=$("<div>Field Size</div>");var f=$('<div><select id="field.size" style="width: 99%"> 				<option value="sClass">Small</option> 				<option value="mClass">Medium</option> 				<option value="lClass">Large</option> 			</select></div>');var l=$("<div>Range in characters</div>");var c=$("<div>Minimum</div>");var h=$("<div>Maximum</div>");var p=$('<div><input type="text" id="field.minRange" style="width:70px;" value="0" maxlength="7"/></div>');var d=$('<div><input type="text" id="field.maxRange" style="width:70px;" value="" maxlength="7"/></div>');var v=$('<div><input type="checkbox" id="field.required" /> Required</div>');var m=$('<div><select id="field.restriction" style="width: 99%"> 				<option value="no">Any character</option> 				<option value="alphanumeric">Alphanumeric only</option> 				<option value="letterswithbasicpunc">Letters or punctuation only</option> 				<option value="lettersonly">Letters only</option>         		<option value="email">Email</option> 			</select></div>');var g=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var y=t.target._fieldset({text:"Value"});if(r!=null){y.append(t.target._oneColumn(l)).append(t.target._twoColumns(c,p)).append(t.target._twoColumns(h,d)).append(t.target._twoColumns(i,s)).append(t.target._twoColumns(o,u)).append(t.target._twoColumns(a,f))}y.append(t.target._twoColumns(v,m)).append(g);$(".col1",y).css("width","32%").removeClass("labelOnTop");$(".col2",y).css("marginLeft","34%").removeClass("labelOnTop");if(r!=null){$("option",n).each(function(){for(var e=0;e<r.length;e++){if($(this).val()==r[e]){$("select",s).append($(this).clone())}}});$("select",u).change(function(){t.settings.mapMasterField=$(this).val();t.target._updateSettings(t.item)});$("select",s).change(function(){var e=$("select",u);$("option",e).remove();e.append($('<option value="">--Please Select--</option>'));if($(this).val()!=""){for(var n=0;n<masterFormData.length;n++){if(masterFormData[n].id==$(this).val()){var r=masterFormData[n].fieldsList;for(var i=0;i<r.length;i++){var s=$("<option></option>");e.append(s);s.text(r[i].label);s.val(r[i].name)}}}e.val(t.settings.mapMasterField)}t.settings.mapMasterForm=$(this).val();t.target._updateSettings(t.item)}).val(t.settings.mapMasterForm);$("select",s).trigger("change")}$("input",v).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",g).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",g).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",v).trigger("change");$("input",g).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",v).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",v).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",g).trigger("change");$("select option[value='"+t.settings.restriction+"']",m).attr("selected","true");$("select",m).change(function(e){t.settings.restriction=$(this).val();t.target._log("fb.settings.restriction = "+t.settings.restriction);t.target._updateSettings(t.item)});if(!t.settings.fieldSize){t.settings.fieldSize="mClass"}$("select",f).val(t.settings.fieldSize).change(function(e){t.settings.fieldSize=$(this).val();var n=t.item.find("input").parent();if($(n).hasClass("sClass")){$(n).removeClass("sClass")}else if(n.hasClass("mClass")){$(n).removeClass("mClass")}else if(n.hasClass("lClass")){$(n).removeClass("lClass")}$(n).addClass(t.settings.fieldSize);t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.minRange){t.settings.minRange=0}$("input[id$='field.minRange']",p).val(t.settings.minRange).keyup(function(e){var n=$(this).val();var r=n;if(n!=""){r=r.replace(/([^0-9]*)/g,"");if(r>2147483647)r=2147483647;$(this).val(r)}t.settings.minRange=r;t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.maxRange){t.settings.maxRange=""}$("input[id$='field.maxRange']",d).val(t.settings.maxRange).keyup(function(e){var n=$(this).val();var r=n;if(n!=""){r=r.replace(/([^0-9]*)/g,"");if(r>2147483647)r=2147483647;$(this).val(r)}t.settings.maxRange=r;t.target._updateSettings(t.item)}).trigger("change");var b=t.item.find(".textInput");var w=t.settings.styles;if(w.value.color=="default"){w.value.color=b.css("color")}if(w.value.backgroundColor=="default"){w.value.backgroundColor=b.css("backgroundColor")}var E=t.target._labelValueDescriptionColorPanel(w);$("input[id$='field.label.color']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);w.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);w.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",E).change(function(e){var n=$(this).data("colorPicker").color;b.css("color",(n=="transparent"?"":"#")+n);w.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",E).change(function(e){var n=$(this).data("colorPicker").color;b.css("backgroundColor",(n=="transparent"?"":"#")+n);w.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);w.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",E).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);w.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[y,E]},_languageChange:function(e,t){t.target._log("fbSingleLineText.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbSingleLineText.languageChange executed.")}});$.widget("fb.fbSingleLineText",FbSingleLineText);var FbLookUp=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/textfield.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Look Up</span>',belongsTo:$.fb.formbuilder.prototype.options._advanceFieldsPanel,_type:"LookUp",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label> </div>		      	<div class="fullLengthField"><input type="text" class="textInput lookUpInput" /><div class="LookUpButton"></div>	        <p class="formHint"></p></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Look Up",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,mapMasterForm:"",fieldSize:"mClass",mapMasterField:"",restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbLookUp._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbLookUp._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbLookUp._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" class="lookUpInput" id="field.label"/>');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Value",name:"field.value"}).append('<input type="text" id="field.value" />');t.item.find(".textInput").val(t.settings.value);$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();t.item.find(".textInput").val(n);t.settings.value=n;t.target._updateSettings(t.item)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbLookUp._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbLookUp._getFieldSettingsGeneralSection executing...");var n=$("select[id$='form.masterForms']");var r=n.val();var i=$("<div>Look-up Form</div>");var s=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var o=$("<div>Look-up Fields</div>");var u=$('<div><select style="width: 99%" multiple="multiple"></select></div>');var a=$("<div>Field Size</div>");var f=$('<div><select id="field.size" style="width: 99%"> 				<option value="sClass">Small</option> 				<option value="mClass">Medium</option> 				<option value="lClass">Large</option> 			</select></div>');var l=$('<div><input type="checkbox" id="field.required" /> Required</div>');var c=$('<div><select id="field.restriction" style="width: 99%"> 				<option value="no">Any character</option> 				<option value="alphanumeric">Alphanumeric only</option> 				<option value="letterswithbasicpunc">Letters or punctuation only</option> 				<option value="lettersonly">Letters only</option>         		<option value="email">Email</option> 			</select></div>');var h=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var p=t.target._fieldset({text:"Value"});if(r!=null){p.append(t.target._twoColumns(i,s)).append(t.target._twoColumns(o,u))}p.append(t.target._twoColumns(a,f)).append(t.target._twoColumns(l,c)).append(h);$(".col1",p).css("width","32%").removeClass("labelOnTop");$(".col2",p).css("marginLeft","34%").removeClass("labelOnTop");if(r!=null){$("option",n).each(function(){for(var e=0;e<r.length;e++){if($(this).val()==r[e]){$("select",s).append($(this).clone())}}});$("select",u).change(function(){t.settings.mapMasterField=$(this).val();t.target._updateSettings(t.item)});$("select",s).change(function(){var e=$("select",u);$("option",e).remove();if($(this).val()!=""){for(var n=0;n<masterFormData.length;n++){if(masterFormData[n].id==$(this).val()){var r=masterFormData[n].fieldsList;for(var i=0;i<r.length;i++){var s=$("<option></option>");e.append(s);s.text(r[i].label);s.val(r[i].name)}}}e.val(t.settings.mapMasterField);var o=$("option",e);if(o.size()>0&&!e.val()){e.val($(o[0]).attr("value"))}}t.settings.mapMasterForm=$(this).val();t.target._updateSettings(t.item)}).val(t.settings.mapMasterForm);$("select",s).trigger("change")}$("input",l).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",h).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",h).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",l).trigger("change");$("input",h).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",l).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",l).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",h).trigger("change");$("select option[value='"+t.settings.restriction+"']",c).attr("selected","true");$("select",c).change(function(e){t.settings.restriction=$(this).val();t.target._log("fb.settings.restriction = "+t.settings.restriction);t.target._updateSettings(t.item)});if(!t.settings.fieldSize){t.settings.fieldSize="mClass"}$("select",f).val(t.settings.fieldSize).change(function(e){t.settings.fieldSize=$(this).val();var n=t.item.find("input").parent();if($(n).hasClass("sClass")){$(n).removeClass("sClass")}else if(n.hasClass("mClass")){$(n).removeClass("mClass")}else if(n.hasClass("lClass")){$(n).removeClass("lClass")}$(n).addClass(t.settings.fieldSize);t.target._updateSettings(t.item)}).trigger("change");var d=t.item.find(".textInput");var v=t.settings.styles;if(v.value.color=="default"){v.value.color=d.css("color")}if(v.value.backgroundColor=="default"){v.value.backgroundColor=d.css("backgroundColor")}var m=t.target._labelValueDescriptionColorPanel(v);$("input[id$='field.label.color']",m).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);v.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",m).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);v.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",m).change(function(e){var n=$(this).data("colorPicker").color;d.css("color",(n=="transparent"?"":"#")+n);v.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",m).change(function(e){var n=$(this).data("colorPicker").color;d.css("backgroundColor",(n=="transparent"?"":"#")+n);v.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",m).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);v.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",m).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);v.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbLookUp._getFieldSettingsGeneralSection executed.");return[p,m]},_languageChange:function(e,t){t.target._log("fbLookUp.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbLookUp.languageChange executed.")}});$.widget("fb.fbLookUp",FbLookUp);var FbSubForm=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/application_form_add.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Sub Form</span>',belongsTo:$.fb.formbuilder.prototype.options._advanceFieldsPanel,_type:"SubForm",_html:'<div><label style="font-weight:bold;"><em></em><span></span></label>        	<div class="datatableDiv">        	<table class="datatable" cellpadding="0" cellspacing="0" style="margin:0;">             <thead><tr>                              <th style="width:20%;font-weight:bold;">Sub Form Field 1</th>              <th style="width:20%;font-weight:bold;">Sub Form Field 2</th>                <th style="width:20%;font-weight:bold;">Sub Form Field 3</th>                <th style="width:20%;font-weight:bold;">Sub Form Field 4</th>               <th style="width:20%;font-weight:bold;">Sub Form Field 5</th>            </tr></thead>             <tr>                   <td style="width:auto;"> </td>              <td> </td>                   <td> </td>                  <td> </td>                       <td> </td>            </tr>           </table></div>	        <p class="formHint" style="width:100%;"></p></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Sub Form",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,mapMasterForm:"",mapMasterField:"",subForm:"",restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbSubForm._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSubForm._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbSubForm._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",r).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var i=t.settings.styles;var s=t.target._getFbLocalizedSettings().styles;var o=i.fontFamily!="default"?i.fontFamily:s.fontFamily;var u=i.fontSize!="default"?i.fontSize:s.fontSize;var a=t.target._fontPanel({fontFamily:o,fontSize:u,fontStyles:i.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",a).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");i.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");i.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",a).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");i.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");i.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",a).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");i.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");i.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",a).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);i.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",a).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");i.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSubForm._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(n),t.target._oneColumn(r),a]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSubForm._getFieldSettingsGeneralSection executing...");var n=$("<div>Sub Form</div>");var r=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var i=$("<div>Show total for</div>");var s=$('<div><select style="width: 99%" multiple="multiple"></select></div>');var o=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var u=t.target._fieldset({text:"Value"});u.append(t.target._twoColumns(n,r)).append(t.target._twoColumns(i,s)).append(o);$(".col1",u).css("width","32%").removeClass("labelOnTop");$(".col2",u).css("marginLeft","34%").removeClass("labelOnTop");$("input",o).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){t.settings.hideFromUser=true}else{t.settings.hideFromUser=false}t.target._updateSettings(t.item)});for(var a=0;a<subFormData.length;a++){var f=$("<option></option>");$("select",r).append(f);f.val(subFormData[a].id);f.text(subFormData[a].label)}$("select",s).change(function(){t.settings.numericSubField=$(this).val();t.target._updateSettings(t.item)});$("select",r).change(function(){var e=$("select",s);$("option",e).remove();t.settings.subForm=$(this).val();var n=$(this).val();var r=t.item.find(".datatableDiv");var i=0;var o="";if(n!=""){o='<table class="datatable" cellpadding="0" cellspacing="0" style="margin:0;"> 	    	            <thead><tr>                	    	              <th>Edit</th>';for(var u=0;u<subFormData.length;u++){if(n==subFormData[u].id){var a=subFormData[u].fieldsList;while(i<a.length&&i<4){o+="<th>"+a[i].label+"</th>";i++}}}o+="</tr></thead><tr>";for(var u=i;u>=0;u--){o+="<td> </td>"}o+="</tr></table>";for(var u=0;u<subFormData.length;u++){if(subFormData[u].id==$(this).val()){var a=subFormData[u].fieldsList;for(var f=0;f<a.length;f++){if(a[f].isNumeric==true){var l=$("<option></option>");e.append(l);l.text(a[f].label);l.val(a[f].name)}}}}e.val(t.settings.numericSubField)}else{o='<table class="datatable" cellpadding="0" cellspacing="0" style="margin:0;"> 	    	            <thead><tr>                	    	              <th style="width:20%;font-weight:bold;">Sub Form Field 1</th>	    	              <th style="width:20%;font-weight:bold;">Sub Form Field 2</th>  	    	              <th style="width:20%;font-weight:bold;">Sub Form Field 3</th>  	    	              <th style="width:20%;font-weight:bold;">Sub Form Field 4</th> 	    	              <th style="width:20%;font-weight:bold;">Sub Form Field 5</th>	    	            </tr></thead> 	    	            <tr>     	    	              <td style="width:auto;"> </td>	    	              <td> </td>     	    	              <td> </td>    	    	              <td> </td>         	    	              <td> </td>	    	            </tr> 	    	          </table>'}r.html(o);t.target._updateSettings(t.item)}).val(t.settings.subForm);$("select",r).trigger("change");var l=t.item.find(".textInput");var c=t.settings.styles;if(c.value.color=="default"){c.value.color=l.css("color")}if(c.value.backgroundColor=="default"){c.value.backgroundColor=l.css("backgroundColor")}var h=t.target._labelValueDescriptionColorPanel(c);$("input[id$='field.label.color']",h).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);c.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",h).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);c.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",h).change(function(e){var n=$(this).data("colorPicker").color;l.css("color",(n=="transparent"?"":"#")+n);c.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",h).change(function(e){var n=$(this).data("colorPicker").color;l.css("backgroundColor",(n=="transparent"?"":"#")+n);c.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",h).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);c.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",h).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);c.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSubForm._getFieldSettingsGeneralSection executed.");return[u,h]},_languageChange:function(e,t){t.target._log("fbSubForm.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbSubForm.languageChange executed.")}});$.widget("fb.fbSubForm",FbSubForm);var FbPageBreak=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/page_break.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Page Break</span>',belongsTo:$.fb.formbuilder.prototype.options._advanceFieldsPanel,_type:"PageBreak",_html:'<div class="buttons pageButtons" style="border:0;padding: 5px 1em;margin:0;">        			<div class="backButton" style="display:inline-block;">        				<input type="button" class="button button-gray" value="Back" style="width:64px;" />        			</div>		        	<div class="nextButton" style="display:inline-block;">						<input type="button" class="button button-gray" value="Next" style="width:64px;" /> Page m of n					</div>        		</div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},_persistable:true,required:false,hideFromUser:false,mapMasterForm:"",mapMasterField:"",subForm:"",restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbPageBreak._getWidget executing...");t.target._log("fbPageBreak._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbPageBreak._getFieldSettingsLanguageSection executing...");t.target._log("fbPageBreak._getFieldSettingsLanguageSection executed.");return[]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbPageBreak._getFieldSettingsGeneralSection executing...");t.target._log("fbPageBreak._getFieldSettingsGeneralSection executed.");return[]},_languageChange:function(e,t){t.target._log("fbPageBreak.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbPageBreak.languageChange executed.")}});$.widget("fb.fbPageBreak",FbPageBreak);var FbPaypal=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/paypal.png" style="position:absolute;left:-7px;z-index:2;width:15px" > <img src="'+imageSourceDir+'/images/paypal_text.png"></span>',belongsTo:$.fb.formbuilder.prototype.options._advanceFieldsPanel,_type:"Paypal",_html:'<div><div id="tableDiv"></div><b>Total Payable Amount: 0 (<span class="currency">$</span>)</b></div>        		<div style="border:0;padding: 5px 0 0 0;margin:0;background:none;">        			<div class="pay_now_button"></div>        		</div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},_persistable:true,itemForm:"",iaf:"",iqf:"",inf:"",iimgf:"",idescf:"",curr:"USD",emid:"",test:false,required:false,hideFromUser:false,mapMasterForm:"",mapMasterField:"",restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbPaypal._getWidget executing...");t.target._log("fbPaypal._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbPaypal._getFieldSettingsLanguageSection executing...");var n=$("<div>Source Form</div>");var r=$('<div><select style="width:99%"><option value="">--Please Select--</option></select></div>');var i=$("<div>Name Field</div>");var s=$('<div><select style="width:99%"></select></div>');var o=$("<div>Image Field</div>");var u=$('<div><select style="width:99%"></select></div>');var a=$("<div>Description Field</div>");var f=$('<div><select style="width:99%"></select></div>');var l=$("<div>Amount Field</div>");var c=$('<div><select style="width:99%"></select></div>');var h=$("<div>Quantity Field</div>");var p=$('<div><select style="width:99%"></select></div>');var d=$("<div>Currency</div>");var v=$('<div><select style="width:76px"><option value="USD">$</option><option value="GBP">£</option><option value="JPY">¥</option><option value="EUR"></option></select></div>');var m=$("<div>Paypal Id</div>");var g=$('<div><input type="text" style="width:88%"></div>');var y=$("<div>Sandbox</div>");var b=$('<div><input type="checkbox"></div>');for(var w=0;w<masterFormData.length;w++){var E=$("<option></option>");$("select",r).append(E);E.val(masterFormData[w].id);E.text(masterFormData[w].label)}var S=$("select",c);var x=$("select",p);var T=$("select",f);var N=$("select",s);var C=$("select",u);var k=$("select",v);var L=$("input",g);var A=$("input",b);var O=t.item.find("#tableDiv");S.change(function(){t.settings.iaf=$(this).val();t.target._updateSettings(t.item)});x.change(function(){t.settings.iqf=$(this).val();t.target._updateSettings(t.item)});T.change(function(){t.settings.idescf=$(this).val();t.target._updateSettings(t.item)});N.change(function(){t.settings.inf=$(this).val();t.target._updateSettings(t.item)});C.change(function(){t.settings.iimgf=$(this).val();t.target._updateSettings(t.item)});A.change(function(){t.settings.test=this.checked;t.target._updateSettings(t.item)});if(t.settings.test)A.attr("checked","checked");k.change(function(){t.item.find(".currency").html($('option[value="'+this.value+'"]',$(this)).text());t.settings.curr=$(this).val();t.target._updateSettings(t.item)});L.change(function(){t.settings.emid=$(this).val();t.target._updateSettings(t.item)});k.val(t.settings.curr);L.val(t.settings.emid);$("select",r).change(function(){$("option",S).remove();$("option",x).remove();$("option",T).remove();$("option",N).remove();$("option",C).remove();t.settings.itemForm=$(this).val();var e=$(this).val();var n=t.item.find(".datatableDiv");var r=0;if(e!=""){var i='<table class="itmTable">    				<tbody>    					<tr class="itmHeader"><td>Preview</td><td>Product Name & Description</td><td>Price</td><td>Quantity</td><td>Amount</td></tr>    					<tr class="itm">							<td><img src="/form-builder/images/previewImage.png" style="width: 80px;"></td>							<td><b>Item Name</b><br>Item description here.</td><td> </td><td> </td><td> </td>    					</tr>    				</tbody>    				</table>';O.html(i);for(var s=0;s<masterFormData.length;s++){if(masterFormData[s].id==$(this).val()){var o=masterFormData[s].fieldsList;for(var u=0;u<o.length;u++){if(o[u].isNumeric||o[u].isString||o[u].isFileUpload){var a=$("<option></option>");a.text(o[u].label);a.val(o[u].name);if(o[u].isNumeric){S.append(a);x.append(a.clone())}else if(o[u].isString){N.append(a);T.append(a.clone())}else if(o[u].isFileUpload){C.append(a)}}}}}}else{O.html("");var f=$("<option></option>");f.text("--Please select--");f.val("");x.append(f);N.append(f.clone());T.append(f.clone());$(".ctrlHolder:not(.deletedCtrlHolder)").each(function(){var e=$(this);var t=e.attr("rel");var n=e.find("input[id$='fields["+t+"].type']").val();var r=false,i=false;if(n=="SingleLineNumber"||n=="FormulaField"){r=true}else if(n=="SingleLineText"||n=="MultiLineText"){i=true}if(r||i){var s=e.find("input[id$='fields["+t+"].settings']");var o=e.find("input[id$='fields["+t+"].name']").val();var u=$.parseJSON(unescape(s.val()));var a=$("<option></option>");a.text(u.en.label);a.val(o);if(r){S.append(a);x.append(a.clone())}else{N.append(a);T.append(a.clone())}}})}var l=function(e,t){t=e.val(t!=null?t:"").val();e.val(t);return t};t.settings.inf=l(N,t.settings.inf);t.settings.iimgf=l(C,t.settings.iimgf);t.settings.idescf=l(T,t.settings.idescf);t.settings.iaf=l(S,t.settings.iaf);t.settings.iqf=l(x,t.settings.iqf);t.target._updateSettings(t.item)}).val(t.settings.itemForm);$("select",r).trigger("change");var M=t.item.find(".textInput");var _=t.settings.styles;if(_.value.color=="default"){_.value.color=M.css("color")}if(_.value.backgroundColor=="default"){_.value.backgroundColor=M.css("backgroundColor")}t.target._log("fbPaypal._getFieldSettingsLanguageSection executed.");var D=[t.target._twoColumns(n,r),t.target._twoColumns(i,s),t.target._twoColumns(o,u),t.target._twoColumns(a,f),t.target._twoColumns(l,c),t.target._twoColumns(h,p),t.target._twoColumns(d,v),t.target._twoColumns(m,g),t.target._twoColumns(y,b)];for(var P=0;P<D.length;P++){$(".col1",D[P]).css("width","40%").css("padding-top","4px").removeClass("labelOnTop");$(".col2",D[P]).css("marginLeft","42%").removeClass("labelOnTop")}return D},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbPaypal._getFieldSettingsGeneralSection executing...");t.target._log("fbPaypal._getFieldSettingsGeneralSection executed.");return[]},_languageChange:function(e,t){t.target._log("fbPaypal.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbPaypal.languageChange executed.")}});$.widget("fb.fbPaypal",FbPaypal);var ImageUpload=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/image_add.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Link Image</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"ImageUpload",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span></label></div>         	<div class="fullLengthField"><img src="" class="imgDisplay" width="100px" height="100px" id="image"/><p></p><input type="button" class="button button-green" style="display:none;" value="Select Image"><input type="file" name="imageFile" style="display:none;"/></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Image",height:100,width:100,value:"",description:"",uploadImage:false,clickable:false,clickableURL:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},zh_CN:{label:"??????",height:100,width:100,value:"",description:"",uploadImage:false,styles:{fontFamily:"default",fontSize:"default",fontStyles:[0,0,0]}},_persistable:true,required:false,hideFromUser:false,restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=((1+Math.random())*65536|0).toString(16).substring(1);var r=$(t.target.options._html);t.target._log("fbSingleLineText._getWidget executing...");$("label span",r).text(t.settings.label);if(t._settings.required){$("label em",r).text("*")}$("input",r).val(t.settings.value);$(".formHint",r).text(t.settings.description);return r},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Image Url",name:"field.value"}).append('<input type="text" id="field.value" />');$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();t.item.find("img").attr("src",n);t.settings.value=n;t.target._updateSettings(t.item)});$("input[type='button'].button").unbind("click");$("input[type='button'].button").click(function(e){var n=t.item.find("input[type='file']");n.trigger("click")});$("input[type='file']").change(function(e){var n=$(this).val();t.item.find("p").html(n)});var i=t.target._twoColumns($('<div><input type="checkbox" id="field.imageUpload"/></div>'),$("<div>Upload image</div>"));$(".col1",i).css("width","10%").removeClass("labelOnTop").css("padding","5px 0");$(".col2",i).css("marginLeft","10%").removeClass("labelOnTop").css("padding","8px 0");var s=t.target._twoColumns($('<div><input type="checkbox" id="field.clickable"/></div>'),$("<div>Clickable</div>"));$(".col1",s).css("width","10%").removeClass("labelOnTop").css("padding","5px 0");$(".col2",s).css("marginLeft","10%").removeClass("labelOnTop").css("padding","8px 0");var o=t.target._label({label:"Clickable Url",name:"field.clickableURL"}).append('<input type="text" id="field.clickableURL" />');if(!t.settings.uploadImage){t.settings.uploadImage=false}$("input[id$='field.imageUpload'][type='checkbox']",i).attr("checked",t.settings.uploadImage).change(function(e){var n=t.item.find("input[type='file']");var r=t.item.find("input[type='button']");var i=t.item.find("input[id$='fields["+t.item.attr("rel")+"].name']").val();if(this.checked){r.val("Select Image");r.show();t.settings.uploadImage=true}else{r.hide();t.settings.uploadImage=false}n.attr("name",i);t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.clickable){t.settings.clickable=""}$("input[id$='field.clickable'][type='checkbox']",s).attr("checked",t.settings.clickable).change(function(e){if(this.checked){o.show();t.settings.clickable=true}else{o.hide();t.settings.clickable=false}t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.clickableURL){t.settings.clickableURL=""}$("input[id$='field.clickableURL']",o).val(t.settings.clickableURL).keyup(function(e){var n=$(this).val();t.settings.clickableURL=n;t.target._updateSettings(t.item)});var u=$('<div>             height : <input type="text">                  </div>');var a=$('<div>             width <input type="text">                  </div>');$("input",u).val(t.settings.height);$("input",u).keyup(function(e){var n=$(this).val();if(n!=""){n=n.replace(/([^0-9]*)/g,"")}else{$(".ctrlHolderSelected img").height("");n=$(".ctrlHolderSelected img").height()}$(".ctrlHolderSelected img").height(n*1);$(this).val(n);t.settings.height=n;t.target._updateSettings(t.item)}).keydown(function(e){if(e.keyCode==38){var t=$(this).val();$(this).val(t*1+5)}else if(e.keyCode==40){var n=$(this).val();$(this).val(n*1-5)}}).blur(function(e){$(this).trigger("keyup")});$("input",a).val(t.settings.width);$("input",a).keyup(function(e){var n=$(this).val();if(n!=""){n=n.replace(/([^0-9]*)/g,"");var r=$(".ctrlHolderSelected img").parent().innerWidth();n=n>r?r:n}else{$(".ctrlHolderSelected img").width("");$(".ctrlHolderSelected img").removeAttr("width");$(".ctrlHolderSelected img").height("");$(".ctrlHolderSelected img").removeAttr("height");$(".ctrlHolderSelected img").hide();var r=$(".ctrlHolderSelected img").parent().innerWidth();var i=$(".ctrlHolderSelected img").innerWidth();n=i>r?r:i;$(".ctrlHolderSelected img").show()}$(".ctrlHolderSelected img").width(n*1);$(this).val(n);$("input",u).val($(".ctrlHolderSelected img").height());t.settings.width=n;t.settings.height=$("input",u).val();t.target._updateSettings(t.item)}).keydown(function(e){if(e.keyCode==38){var t=$(this).val();$(this).val(t*1+5)}else if(e.keyCode==40){var t=$(this).val();$(this).val(t*1-5)}}).blur(function(e){$(this).trigger("keyup")});var f=t.target._fieldset({text:"Choices"}).append(t.target._twoColumns(u,a));var l=t.settings.styles;var c=t.target._getFbLocalizedSettings().styles;var h=l.fontFamily!="default"?l.fontFamily:c.fontFamily;var p=l.fontSize!="default"?l.fontSize:c.fontSize;var d=t.target._fontPanel({fontFamily:h,fontSize:p,fontStyles:l.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",d).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");l.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");l.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",d).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");l.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");l.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",d).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");l.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");l.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",d).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);l.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",d).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");l.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),i,s,o,f,d]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=t.item.find(".textInput");var r=t.settings.styles;if(r.value.color=="default"){r.value.color=n.css("color")}if(r.value.backgroundColor=="default"){r.value.backgroundColor=n.css("backgroundColor")}var i=t.target._labelValueDescriptionColorPanel(r);$("input[id$='field.label.color']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);r.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);r.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",i).change(function(e){var i=$(this).data("colorPicker").color;n.css("color",(i=="transparent"?"":"#")+i);r.value.color=i;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",i).change(function(e){var i=$(this).data("colorPicker").color;n.css("backgroundColor",(i=="transparent"?"":"#")+i);r.value.backgroundColor=i;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);r.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",i).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);r.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[i]},_languageChange:function(e,t){t.target._log("fbSingleLineText.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbSingleLineText.languageChange executed.")}});$.widget("fb.fbImageUpload",ImageUpload);var FbSingleLineNumber=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/singlelinetext.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Number</span>',belongsTo:$.fb.formbuilder.prototype.options._standardFieldsPanel,_type:"SingleLineNumber",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label></div>         		<div class="fullLengthField"><input type="text" class="textInput" /> 	        	<p class="formHint"></p></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Numeric Text",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,mapMasterForm:"",mapMasterField:"",fieldSize:"mClass",minRange:"0",maxRange:"",restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbSingleLineNumber._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSingleLineNumber._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbSingleLineNumber._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Value",name:"field.value"}).append('<input type="text" id="field.value" />');$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();var r=n;if(n!=""){r=r.replace(/([^0-9.]*)/g,"");var i="";var s=false;for(var o=0;o<r.length;o++){if(s&&r.charAt(o)==".")break;if(!s)s=r.charAt(o)==".";i+=r.charAt(o)}while(i.indexOf("0")==0&&i.indexOf("0.")!=0&&i.length>1){i=i.replace("0","")}r=i;$(this).val(r)}t.item.find(".textInput").val(r);t.settings.value=r;t.target._updateSettings(t.item)}).blur(function(e){$(this).trigger("keyup")});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineNumber._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineNumber._getFieldSettingsGeneralSection executing...");var n=$("select[id$='form.masterForms']");var r=n.val();var i=$("<div>Mapped Form</div>");var s=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var o=$("<div>Mapped Field</div>");var u=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var a=$("<div>Field Size</div>");var f=$('<div><select id="field.size" style="width: 99%"> 				<option value="sClass">Small</option> 				<option value="mClass">Medium</option> 				<option value="lClass">Large</option> 			</select></div>');var l=$("<div>Range for value</div>");var c=$("<div>Minimum</div>");var h=$("<div>Maximum</div>");var p=$('<div><input type="text" id="field.minRange" style="width:70px;" value="0" maxlength="20"/></div>');var d=$('<div><input type="text" id="field.maxRange" style="width:70px;" value="" maxlength="20"/></div>');var v=$('<div><input type="checkbox" id="field.required" /> Required</div>');var m=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var g=t.target._fieldset({text:"Value"});if(r!=null){g.append(t.target._oneColumn(l)).append(t.target._twoColumns(c,p)).append(t.target._twoColumns(h,d)).append(t.target._twoColumns(i,s)).append(t.target._twoColumns(o,u)).append(t.target._twoColumns(a,f))}g.append(t.target._twoColumns(v,m));$(".col1",g).css("width","32%").removeClass("labelOnTop");$(".col2",g).css("marginLeft","34%").removeClass("labelOnTop");if(r!=null){$("option",n).each(function(){for(var e=0;e<r.length;e++){if($(this).val()==r[e]){$("select",s).append($(this).clone())}}});$("select",u).change(function(){t.settings.mapMasterField=$(this).val();t.target._updateSettings(t.item)});$("select",s).change(function(){var e=$("select",u);$("option",e).remove();e.append($('<option value="">--Please Select--</option>'));if($(this).val()!=""){for(var n=0;n<masterFormData.length;n++){if(masterFormData[n].id==$(this).val()){var r=masterFormData[n].fieldsList;for(var i=0;i<r.length;i++){var s=$("<option></option>");e.append(s);s.text(r[i].label);s.val(r[i].name)}}}e.val(t.settings.mapMasterField)}t.settings.mapMasterForm=$(this).val();t.target._updateSettings(t.item)}).val(t.settings.mapMasterForm);$("select",s).trigger("change")}$("input",v).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",m).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",m).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",v).trigger("change");$("input",m).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",v).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",v).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",m).trigger("change");if(!t.settings.fieldSize){t.settings.fieldSize="mClass"}$("select",f).val(t.settings.fieldSize).change(function(e){t.settings.fieldSize=$(this).val();var n=t.item.find("input").parent();if($(n).hasClass("sClass")){$(n).removeClass("sClass")}else if(n.hasClass("mClass")){$(n).removeClass("mClass")}else if(n.hasClass("lClass")){$(n).removeClass("lClass")}$(n).addClass(t.settings.fieldSize);t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.minRange){t.settings.minRange=0}$("input[id$='field.minRange']",p).val(t.settings.minRange).keyup(function(e){var n=$(this).val();var r=n;if(n!=""){r=r.replace(/([^0-9.]*)/g,"");var i="";var s=false;for(var o=0;o<r.length;o++){if(s&&r.charAt(o)==".")break;if(!s)s=r.charAt(o)==".";i+=r.charAt(o)}while(i.indexOf("0")==0&&i.indexOf("0.")!=0&&i.length>1){i=i.replace("0","")}if(i>2147483647)i=2147483647;r=i}t.settings.minRange=r;t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.maxRange){t.settings.maxRange=""}$("input[id$='field.maxRange']",d).val(t.settings.maxRange).keyup(function(e){var n=$(this).val();var r=n;if(n!=""){r=r.replace(/([^0-9.]*)/g,"");var i="";var s=false;for(var o=0;o<r.length;o++){if(s&&r.charAt(o)==".")break;if(!s)s=r.charAt(o)==".";i+=r.charAt(o)}while(i.indexOf("0")==0&&i.indexOf("0.")!=0&&i.length>1){i=i.replace("0","")}if(i>2147483647)i=2147483647;r=i}t.settings.maxRange=r;t.target._updateSettings(t.item)}).trigger("change");var y=t.item.find(".textInput");var b=t.settings.styles;if(b.value.color=="default"){b.value.color=y.css("color")}if(b.value.backgroundColor=="default"){b.value.backgroundColor=y.css("backgroundColor")}var w=t.target._labelValueDescriptionColorPanel(b);$("input[id$='field.label.color']",w).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);b.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",w).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);b.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",w).change(function(e){var n=$(this).data("colorPicker").color;y.css("color",(n=="transparent"?"":"#")+n);b.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",w).change(function(e){var n=$(this).data("colorPicker").color;y.css("backgroundColor",(n=="transparent"?"":"#")+n);b.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",w).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);b.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",w).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);b.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineNumber._getFieldSettingsGeneralSection executed.");return[g,w]},_languageChange:function(e,t){t.target._log("fbSingleLineNumber.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbSingleLineNumber.languageChange executed.")}});$.widget("fb.fbSingleLineNumber",FbSingleLineNumber);var FbSingleLineDate=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/date_input.png" style="position:absolute;left:-7px;z-index:2;width:15px" > Date</span>',belongsTo:$.fb.formbuilder.prototype.options._standardFieldsPanel,_type:"SingleLineDate",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label> </div>        		<div class="fullLengthField"><div class="singleDateField mClass"><input type="text" class="textInput" /><img src="'+imageSourceDir+'/images/calendar_16.png" style="position:absolute;margin:5px;" ></div>         		<div class="boxDateField" style="display:none;width:40%;"><input type="text" style="width:30px !important;" placeholder="MM"/>/<input type="text" style="width:30px !important;" placeholder="DD"/>/<input type="text" style="width:60px !important;" placeholder="YYYY"/></div> 	        <p class="formHint"></p></div></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Date",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:"",description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,fieldSize:"mClass",hideFromUser:false,showCalendar:true,mapMasterForm:"",mapMasterField:"",restriction:"no",styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$(t.target.options._html);t.target._log("fbSingleLineDate._getWidget executing...");$("label span",n).text(t.settings.label);if(t._settings.required){$("label em",n).text("*")}$("input",n).val(t.settings.value);$(".formHint",n).text(t.settings.description);t.target._log("fbSingleLineDate._getWidget executed.");return n},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbSingleLineDate._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Label",name:"field.label"}).append('<input type="text" id="field.label" />');$("input",n).val(t.settings.label).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Value",name:"field.value"}).append('<input type="text" id="field.value" />');t.item.find(".textInput").val(t.settings.value);$("input",r).val(t.settings.value).keyup(function(e){var n=$(this).val();t.item.find(".textInput").val(n);t.settings.value=n;t.target._updateSettings(t.item)});var i=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",i).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var s=t.settings.styles;var o=t.target._getFbLocalizedSettings().styles;var u=s.fontFamily!="default"?s.fontFamily:o.fontFamily;var a=s.fontSize!="default"?s.fontSize:o.fontSize;var f=t.target._fontPanel({fontFamily:u,fontSize:a,fontStyles:s.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");s.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");s.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",f).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");s.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");s.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",f).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");s.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");s.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",f).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);s.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",f).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");s.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineDate._getFieldSettingsLanguageSection executed.");return[t.target._twoColumns(n,r),t.target._oneColumn(i),f]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineDate._getFieldSettingsGeneralSection executing...");var n=$("select[id$='form.masterForms']");var r=n.val();var i=$("<div>Mapped Form</div>");var s=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var o=$("<div>Mapped Field</div>");var u=$('<div><select style="width: 99%"><option value="">--Please Select--</option></select></div>');var a=$("<div>Field Size</div>");var f=$('<div><select id="field.size" style="width: 99%"> 				<option value="sClass">Small</option> 				<option value="mClass">Medium</option> 				<option value="lClass">Large</option> 			</select></div>');var l=$('<div><input type="checkbox" id="field.required" /> Required</div>');var c=$('<div><select id="field.restriction" style="width: 99%"> 				<option value="no">date type</option> 			</select></div>');var h=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From      User</div>');var p=$('<div><input type="checkbox" id="field.showCalendar" /> Show Calendar</div>');var d=t.target._fieldset({text:"Value"});if(r!=null){d.append(t.target._twoColumns(i,s)).append(t.target._twoColumns(o,u)).append(t.target._twoColumns(a,f))}d.append(t.target._twoColumns(l,c)).append(t.target._twoColumns(h,p));$(".col1",d).css("width","32%").removeClass("labelOnTop");$(".col2",d).css("marginLeft","34%").removeClass("labelOnTop");if(r!=null){$("option",n).each(function(){for(var e=0;e<r.length;e++){if($(this).val()==r[e]){$("select",s).append($(this).clone())}}});$("select",u).change(function(){t.settings.mapMasterField=$(this).val();t.target._updateSettings(t.item)});$("select",s).change(function(){var e=$("select",u);$("option",e).remove();e.append($('<option value="">--Please Select--</option>'));if($(this).val()!=""){for(var n=0;n<masterFormData.length;n++){if(masterFormData[n].id==$(this).val()){var r=masterFormData[n].fieldsList;for(var i=0;i<r.length;i++){var s=$("<option></option>");e.append(s);s.text(r[i].label);s.val(r[i].name)}}}e.val(t.settings.mapMasterField)}t.settings.mapMasterForm=$(this).val();t.target._updateSettings(t.item)}).val(t.settings.mapMasterForm);$("select",s).trigger("change")}$("input",l).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",h).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",h).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",l).trigger("change");$("input",h).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",l).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",l).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",h).trigger("change");if(!t.settings.showCalendar){t.settings.showCalendar=false}$("input",p).attr("checked",t.settings.showCalendar).change(function(e){var n=t.item.find(".boxDateField");var r=t.item.find(".singleDateField");if($(this).attr("checked")){$(n).hide();$(r).show();t.settings.showCalendar=true}else{$(r).hide();$(n).show();t.settings.showCalendar=false}t.target._updateSettings(t.item)}).trigger("change");if(!t.settings.fieldSize){t.settings.fieldSize="mClass"}$("select",f).val(t.settings.fieldSize).change(function(e){t.settings.fieldSize=$(this).val();var n=t.item.find("img").parent();if($(n).hasClass("sClass")){$(n).removeClass("sClass")}else if(n.hasClass("mClass")){$(n).removeClass("mClass")}else if(n.hasClass("lClass")){$(n).removeClass("lClass")}$(n).addClass(t.settings.fieldSize);t.target._updateSettings(t.item)}).trigger("change");$("select option[value='"+t.settings.restriction+"']",c).attr("selected","true");$("select",c).change(function(e){t.settings.restriction=$(this).val();t.target._log("fb.settings.restriction = "+t.settings.restriction);t.target._updateSettings(t.item)});var v=t.item.find(".textInput");var m=t.settings.styles;if(m.value.color=="default"){m.value.color=v.css("color")}if(m.value.backgroundColor=="default"){m.value.backgroundColor=v.css("backgroundColor")}var g=t.target._labelValueDescriptionColorPanel(m);$("input[id$='field.label.color']",g).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);m.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",g).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);m.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",g).change(function(e){var n=$(this).data("colorPicker").color;v.css("color",(n=="transparent"?"":"#")+n);m.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",g).change(function(e){var n=$(this).data("colorPicker").color;v.css("backgroundColor",(n=="transparent"?"":"#")+n);m.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",g).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);m.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",g).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);m.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineDate._getFieldSettingsGeneralSection executed.");return[d,g]},_languageChange:function(e,t){t.target._log("fbSingleLineDate.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbSingleLineDate.languageChange executed.")}});$.widget("fb.fbSingleLineDate",FbSingleLineDate);var fbLikeDislikeButton=$.extend({},$.fb.fbWidget.prototype,{options:{name:'<span style="padding-left:7px;position:relative;font-size:11px"><img src="'+imageSourceDir+'/images/icons/thumb_up.png" style="position:absolute;left:-7px;z-index:2;width:16px" > Like/Dislike</span>',belongsTo:$.fb.formbuilder.prototype.options._fancyFieldsPanel,_type:"LikeDislikeButton",_html:'<div><div class="fullLengthLabel"><label style="font-weight:bold;"><span></span><em></em></label></div>         		<div class="fullLengthField"><div class="likeDislikeOption" ><div id="LikeChoicerd"><div class="thumbStyle thumbUp"> </div><span id="LikeChoicesr">Like (+1 Likes)</span><br/><br/></div> 				<div id="DislikeChoicerd"><div class="thumbStyle thumbDown"> </div><span id="DislikeChoicesr">Dislike (-1 Dislikes)</span><br/><br/></div>				</div><div class="voteOption" style="display:none;margin-top:10px;"><div class="button1 small green" style="padding: 12px 12px;"> +1 Votes</div><br/><br/> 				<div class="button button-gray">Vote It!</div> 				</div></div><p class="formHint"></p></div>',_counterField:"label",_languages:["en","zh_CN"],settings:{en:{label:"Like/Dislike",value:["Like","Dislike"],description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},zh_CN:{label:"??????",value:["1","0"],description:"",styles:{fontFamily:"default",fontSize:"default",fontStyles:[1,0,0]}},_persistable:true,required:false,hideFromUser:false,restriction:"no",likeAndVote:false,styles:{label:{color:"default",backgroundColor:"default"},value:{color:"default",backgroundColor:"default"},description:{color:"777777",backgroundColor:"default"}}}},_init:function(){$.fb.fbWidget.prototype._init.call(this);this.options=$.extend({},$.fb.fbWidget.prototype.options,this.options)},_getWidget:function(e,t){var n=$("#builderForm div.ctrlHolder").size()+$("#builderForm div.ctrlHolderChk").size();var r=index1==0?index1=n:index1;n=index1-1;var i=$(t.target.options._html);$("#GrpBtnPanel",i).attr("id","GrpBtnPanel"+r);var s=1;$("input",i).each(function(){$(this).attr("id","radio"+r+"_"+s);$(this).val(t.settings.value[s-1]);s=s+1});t.target._log("fbLikeDislikeButton._getWidget executing...");$("label span",i).text(t.settings.label);if(t._settings.required){$("label em",i).text("*")}$(".formHint",i).text(t.settings.description);t.target._log("fbLikeDislikeButton._getWidget executed.");return i},_getFieldSettingsLanguageSection:function(e,t){t.target._log("fbLikeDislikeButton._getFieldSettingsLanguageSection executing...");var n=t.target._label({label:"Field Label (?)",name:"field.label"}).append('<textarea id="field.label" />');$("textarea",n).val(t.item.find("label span").text()).keyup(function(e){var n=$(this).val();t.item.find("label span").text(n);t.settings.label=n;t.target._updateSettings(t.item);t.target._updateName(t.item,n)});var r=t.target._label({label:"Description",name:"field.description"}).append('<textarea id="field.description"></textarea>');$("textarea",r).val(t.settings.description).keyup(function(e){var n=$(this).val();t.item.find(".formHint").text(n);t.settings.description=n;t.target._updateSettings(t.item)});var i=t.settings.styles;var s=t.target._getFbLocalizedSettings().styles;var o=i.fontFamily!="default"?i.fontFamily:s.fontFamily;var u=i.fontSize!="default"?i.fontSize:s.fontSize;var a=t.target._fontPanel({fontFamily:o,fontSize:u,fontStyles:i.fontStyles,idPrefix:"field.",nofieldset:true});$("input[id$='field.bold']",a).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontWeight","bold");t.item.find(".textInput").css("fontWeight","bold");i.fontStyles[0]=1}else{t.item.find("label").css("fontWeight","normal");t.item.find(".textInput").css("fontWeight","normal");i.fontStyles[0]=0}t.target._updateSettings(t.item)});$("input[id$='field.italic']",a).change(function(e){if($(this).attr("checked")){t.item.find("label").css("fontStyle","italic");t.item.find(".textInput").css("fontStyle","italic");i.fontStyles[1]=1}else{t.item.find("label").css("fontStyle","normal");t.item.find(".textInput").css("fontStyle","normal");i.fontStyles[1]=0}t.target._updateSettings(t.item)});$("input[id$='field.underline']",a).change(function(e){if($(this).attr("checked")){t.item.find("label span").css("textDecoration","underline");t.item.find(".textInput").css("textDecoration","underline");i.fontStyles[2]=1}else{t.item.find("label span").css("textDecoration","none");t.item.find(".textInput").css("textDecoration","none");i.fontStyles[2]=0}t.target._updateSettings(t.item)});$("input[id$='field.fontFamily']",a).change(function(e){var n=$(this).val();t.item.css("fontFamily",n);t.item.find(".textInput").css("fontFamily",n);i.fontFamily=n;t.target._updateSettings(t.item)});$("select[id$='field.fontSize']",a).change(function(e){var n=$(this).val();t.item.find("label").css("fontSize",n+"px");t.item.find(".textInput").css("fontSize",n+"px");i.fontSize=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsLanguageSection executed.");return[t.target._oneColumn(n),t.target._oneColumn(r),a]},_getFieldSettingsGeneralSection:function(e,t){t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executing...");var n=$('<div><input type="checkbox" id="field.required" /> Required</div>');var r=$('<div><input type="checkbox" id="field.hideFromUser" /> Hide From User</div>');var i=$('<div><label for="field.likeDislike"> Type </label> <select id="field.likeDislike"><option value="false">Like/Dislike</option><option value="true">Voting</option></select></div>');var s=t.target._fieldset({text:"Value"}).append(t.target._twoColumns(n,r)).append(i);$(".col1",s).css("width","32%").removeClass("labelOnTop");$(".col2",s).css("marginLeft","34%").removeClass("labelOnTop");$("input",n).attr("checked",t.settings.required).change(function(e){if($(this).attr("checked")){$("input",r).attr("disabled","disabled");t.item.find("em").text(" *");t.settings.required=true}else{$("input",r).removeAttr("disabled");t.item.find("em").text("");t.settings.required=false}t.target._updateSettings(t.item)});$("input",n).trigger("change");$("input",r).attr("checked",t.settings.hideFromUser).change(function(e){if($(this).attr("checked")){$("input",n).attr("disabled","disabled");t.settings.hideFromUser=true}else{$("input",n).removeAttr("disabled");t.settings.hideFromUser=false}t.target._updateSettings(t.item)});$("input",r).trigger("change");$("select",i).val(""+t.settings.likeAndVote).change(function(e){if($(this).val()=="true"){t.settings.likeAndVote=true;t.item.find(".likeDislikeOption").hide();t.item.find(".voteOption").show()}else{t.settings.likeAndVote=false;t.item.find(".likeDislikeOption").show();t.item.find(".voteOption").hide()}t.target._updateSettings(t.item)});var o=t.item.find(".textInput");var u=t.settings.styles;if(u.value.color=="default"){u.value.color=o.css("color")}if(u.value.backgroundColor=="default"){u.value.backgroundColor=o.css("backgroundColor")}var a=t.target._labelValueDescriptionColorPanel(u);$("input[id$='field.label.color']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("color",(n=="transparent"?"":"#")+n);u.label.color=n;t.target._updateSettings(t.item)});$("input[id$='field.label.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.css("backgroundColor",(n=="transparent"?"":"#")+n);u.label.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.value.color']",a).change(function(e){var n=$(this).data("colorPicker").color;o.css("color",(n=="transparent"?"":"#")+n);u.value.color=n;t.target._updateSettings(t.item)});$("input[id$='field.value.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;o.css("backgroundColor",(n=="transparent"?"":"#")+n);u.value.backgroundColor=n;t.target._updateSettings(t.item)});$("input[id$='field.description.color']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("color",(n=="transparent"?"":"#")+n);u.description.color=n;t.target._updateSettings(t.item)});$("input[id$='field.description.backgroundColor']",a).change(function(e){var n=$(this).data("colorPicker").color;t.item.find(".formHint").css("backgroundColor",(n=="transparent"?"":"#")+n);u.description.backgroundColor=n;t.target._updateSettings(t.item)});t.target._log("fbSingleLineText._getFieldSettingsGeneralSection executed.");return[s,a]},_languageChange:function(e,t){t.target._log("fbDropDown.languageChange executing...");var n=t.settings.styles;var r=t.target._getFbLocalizedSettings().styles;var i=n.fontFamily!="default"?n.fontFamily:r.fontFamily;var s=n.fontSize!="default"?n.fontSize:r.fontSize;var o=n.fontStyles[0]==1?"bold":"normal";var u=n.fontStyles[1]==1?"italic":"normal";var a=n.fontStyles[2]==1?"underline":"none";t.item.css("fontFamily",i);t.item.find("label span").text(t.settings.label).css("textDecoration",a);t.item.find("label").css("fontWeight",o).css("fontStyle",u).css("fontSize",s+"px");t.item.find(".textInput").val(t.settings.value).css("fontWeight",o).css("fontStyle",u).css("textDecoration",a).css("fontFamily",i).css("fontSize",s+"px");t.item.find(".formHint").text(t.settings.description);t.target._log("fbDropDown.languageChange executed.")}});$.widget("fb.fbLikeDislikeButton",fbLikeDislikeButton);var JSON;if(!JSON){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();$(document).ready(function(){$('input[type="submit"][name="_action_save"]').click(submitFormUsingButton);$('input[type="submit"][name="_action_Update"]').click(function(){var e=$(".ctrlHolder");var t=$(".deletedCtrlHolder");var n="";if(e.size()==t.size()){var r=$.fb.formbuilder.prototype.options;if(t.size()>0){n="All fields are deleted. Please create at least one field."}else{n="No field was created. Please select a field."}$(r._standardFieldsPanel).qtip({content:n,position:{my:"top right",at:"bottom right"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{target:$(r._standardFieldsPanel+", "+r._fancyFieldsPanel+", "+r._advanceFieldsPanel)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});return false}if(!vldtPPC()){return false}$(".ctrlHolder:not(.deletedCtrlHolder)").each(function(){var e=$(this);if(document.getElementById("fields["+e.attr("rel")+"].type").value=="FormulaField"){var t=$.parseJSON(unescape(document.getElementById("fields["+e.attr("rel")+"].settings").value));var r=t[$("#language").val()];if(r.newResultType!=r.oldResultType){n+='Type of field "'+r.label+'" changed from '+r.oldResultType+" to "+r.newResultType+".<br/>"}}});if(n!=""){n+="So, data related to above formula field(s) will be reset.<br/>"}if(t.size()>0){n="Updating the form will delete the relevant data for deleted fields, if any.<br/>"+n}if(n!=""){$(this).qtip({content:n+'[ <span onclick="submitForm();" style="cursor:pointer;">OK</span> ] [ <span onclick="hideToolTip();" style="cursor:pointer;">Cancel</span> ]',position:{my:"bottom center",at:"top center"},show:{event:false,ready:true,effect:function(){$(this).show("drop",{direction:"up"})}},hide:{event:"click",target:$(document)},style:{widget:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",tip:true}});return false}return setSequeceOfAllFields()})})